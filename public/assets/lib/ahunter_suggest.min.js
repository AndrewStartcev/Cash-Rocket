(function(){function l(a){a={Options:a,jZipField:null,Fields:[],FieldsByLevels:{},BuildQueryUpTo:function(a){for(var b="",c=0,g=0;g<this.Fields.length;g++)if(e.IsLessOrEqualLevel(this.Fields[g].MinLevel,a.MinLevel)){var h=this.Fields[g].GetValue();if(0<h.length||this.Fields[g]===a)b+=e.GetLevelsSigns(this.Fields[g].Levels),b+="[",b+=e.EscapeQuery(h),b+="]",c+=h.length}else this.Fields[g].ClearValue();this.jZipField&&(a=this.jZipField.val(),b+=f.ZipLevel.sign,b=b+"["+e.EscapeQuery(a),b+="]",c+=a.length);
return 0<c?b:""},IsTailField:function(a){return null==e.Find(this.Fields,function(b){return e.IsLessLevel(a.MaxLevel,b.MinLevel)&&""!=b.GetValue()})},RefreshForm:function(a,b){this.ClearAllFields();for(var c=null,g=0;g<b.length;g++)c=this.FieldsByLevels[b[g].level],c.AppendValue(b[g].type+" "+b[g].name);c&&c!=a&&c.SetFocus(!0)},ClearAllFields:function(){for(var a=0;a<this.Fields.length;a++)this.Fields[a].ClearValue()},Init:function(){for(var a=this,b=0;b<this.Options.fields.length;b++)this.Fields.push(m(this,
this.Options.fields[b]));for(b=0;b<this.Fields.length;b++)for(Level in f.AddressLevels)e.IsLessOrEqualLevel(this.Fields[b].MinLevel,Level)&&e.IsLessOrEqualLevel(Level,this.Fields[b].MaxLevel)&&(this.FieldsByLevels[Level]=this.Fields[b]);void 0!==this.Options.zip_field&&(b=this.Options.zip_field.id,this.jZipField="string"==typeof b&&"#"!==b[0]&&"."!==b[0]?$("#"+b):$(b),this.jZipField.on("keyup"+f.EventsNamespace,function(){a.ClearAllFields()}),this.jZipField.on("input"+f.EventsNamespace,function(){a.ClearAllFields()}),
this.jZipField.on("change"+f.EventsNamespace,function(){a.ClearAllFields()}))},Dispose:function(){for(var a=0;a<this.Fields.length;a++)this.Fields[a].Dispose()}};a.Init();return a}function m(a,d){var b={Options:e.BuildFieldOptions(d,a.Options,"site/suggest/address"),AddressForm:a,Levels:d.levels,MinLevel:"",MaxLevel:"",EXT:{PrepareQuery:function(a){a="discrete";this.Options.obsolete_names&&(a+="|obsnames");this.Options.obsolete_objects&&(a+="|obsobjects");if(this.Options.house_search||!this.Options.stead_search)a+=
"|house";if(this.Options.stead_search||!this.Options.house_search)a+="|stead";return{query:this.AddressForm.BuildQueryUpTo(this),mode:a,addresslim:this.Options.limit,country:this.Options.country}},IsAllowedToSuggestOnFocus:function(){return this.AddressForm.IsTailField(this)&&this.Options.suggest_on_focus},IsAllowedQuery:function(a,b){var c=a.query&&0<a.query.length?!0:!1;c&&0==b.length&&(c=this.Options.suggest_on_empty);return c},OnChooseSuggestion:function(a){var b=[],b=a.a_machine?e.DecodeMachineAddress(a.a_machine):
a.f_machine?e.DecodeMachineAddress(a.f_machine):e.DecodeMachineAddress(a.machine);this.AddressForm.RefreshForm(this,b);this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,a);this.Options.on_fetch&&(b=$.extend({query:a.sign},this.AddressForm.Options.api_options),b.output=b.output?b.output+"|json":"json",this.Options.user&&(b.user=this.Options.user),$.ajax({type:"GET",url:this.Options.ahunter_url+"site/fetch/address",data:b,cache:!1,context:this,success:function(b){this.Options.on_fetch.call(this.Options.on_fetch_context,
a,b.address)}}))},SuggestionViewInList:function(a){return e.AddressSuggestionViewInList(a)},SuggestionViewInField:function(a){return a.value}},ClearValue:function(){this.ResetField("");this.ClearSuggestions()},AppendValue:function(a){var b=this.GetValue();b&&(b+=", ");this.ResetField(b+a)},Init:function(){this.MinLevel=f.AddressLevels.Flat.name;this.MaxLevel=f.AddressLevels.Region.name;for(var a=0;a<this.Levels.length;a++)e.IsLessLevel(this.Levels[a],this.MinLevel)&&(this.MinLevel=this.Levels[a]),
e.IsLessLevel(this.MaxLevel,this.Levels[a])&&(this.MaxLevel=this.Levels[a]);void 0===d.empty_msg&&this.MinLevel===f.AddressLevels.Flat.name&&(this.Options.empty_msg="")}};b.Init();var c=k(b.Options.id,b.Options.max_height,b.Options.z_index,b.Options.full_url,b.Options.empty_msg,b.Options.append_to,b.Options.on_edit,b.Options.on_edit_context,b.Options.api_options);return e.ExtendSuggester(c,b)}function p(a){a={Options:e.BuildFieldOptions(a,{},"site/suggest/address"),EXT:{PrepareQuery:function(a){a=
{query:a,addresslim:this.Options.limit,country:this.Options.country};var c="";this.Options.obsolete_names&&(c+="obsnames|");this.Options.obsolete_objects&&(c+="obsobjects|");if(this.Options.house_search||!this.Options.stead_search)c+="house|";if(this.Options.stead_search||!this.Options.house_search)c+="stead|";0<c.length&&(a.mode=c);return a},IsAllowedToSuggestOnFocus:function(){return this.Options.suggest_on_focus},OnChooseSuggestion:function(a){this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,
a);if(this.Options.on_fetch){var c=$.extend({query:a.sign},this.Options.api_options);c.output=c.output?c.output+"|json":"json";this.Options.user&&(c.user=this.Options.user);$.ajax({type:"GET",url:this.Options.ahunter_url+"site/fetch/address",data:c,cache:!1,context:this,success:function(c){this.Options.on_fetch.call(this.Options.on_fetch_context,a,c.address)}})}},SuggestionViewInList:function(a){return e.AddressSuggestionViewInList(a)},SuggestionViewInField:function(a){var c=null,c=a.a_machine?e.DecodeMachineAddress(a.a_machine):
a.f_machine?e.DecodeMachineAddress(a.f_machine):e.DecodeMachineAddress(a.machine);return e.AddressFieldsToString(c,!0)}},Init:function(){}};a.Init();var d=k(a.Options.id,a.Options.max_height,a.Options.z_index,a.Options.full_url,a.Options.empty_msg,a.Options.append_to,a.Options.on_edit,a.Options.on_edit_context,a.Options.api_options);return e.ExtendSuggester(d,a)}function q(a){a={Options:a,Fields:[],BuildQueryWithActiveField:function(a){return{active:a.Tag,last_name:this.GetFieldValue("last_name"),
first_name:this.GetFieldValue("first_name"),patronym:this.GetFieldValue("patronym")}},GetFieldValue:function(a){var b=e.Find(this.Fields,function(b){return b.Tag==a});return null!=b?b.GetValue():""},GetPerson:function(){for(var a={last_name:this.GetFieldValue("last_name"),first_name:this.GetFieldValue("first_name"),patronym:this.GetFieldValue("patronym"),full_name:""},b=0;b<this.Fields.length;b++)a.full_name.length&&this.Fields[b].GetValue().length&&(a.full_name+=" "),a.full_name+=this.Fields[b].GetValue();
return a},Init:function(){for(var a=0;a<this.Options.fields.length;a++)this.Fields.push(r(this,this.Options.fields[a]))},Dispose:function(){for(var a=0;a<this.Fields.length;a++)this.Fields[a].Dispose()}};a.Init();return a}function r(a,d){var b={Options:e.BuildFieldOptions(d,a.Options,"site/suggest/person"),PersonForm:a,Tag:d.tag,EXT:{PrepareQuery:function(a){return $.extend(this.PersonForm.BuildQueryWithActiveField(this),{personlim:this.Options.limit})},IsAllowedToSuggestOnFocus:function(){return this.Options.suggest_on_focus},
IsAllowedQuery:function(a,b){return 0<b.length},OnChooseSuggestion:function(a){this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,a);this.Options.on_fetch&&this.Options.on_fetch.call(this.Options.on_fetch_context,a,this.PersonForm.GetPerson())}},Init:function(){}};b.Init();var c=k(b.Options.id,b.Options.max_height,b.Options.z_index,b.Options.full_url,b.Options.empty_msg,b.Options.append_to,b.Options.on_edit,b.Options.on_edit_context,b.Options.api_options);return e.ExtendSuggester(c,
b)}function t(a){a={Options:e.BuildFieldOptions(a,{},"site/suggest/person"),EXT:{PrepareQuery:function(a){return{query:a,personlim:this.Options.limit}},IsAllowedToSuggestOnFocus:function(){return this.Options.suggest_on_focus},OnChooseSuggestion:function(a){this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,a);this.Options.on_fetch&&this.Options.on_fetch.call(this.Options.on_fetch_context,a,{full_name:a.value})}},Init:function(){}};a.Init();var d=k(a.Options.id,a.Options.max_height,
a.Options.z_index,a.Options.full_url,a.Options.empty_msg,a.Options.append_to,a.Options.on_edit,a.Options.on_edit_context,a.Options.api_options);return SolidSuggester=e.ExtendSuggester(d,a)}function u(a){a={Options:e.BuildFieldOptions(a,{},"site/suggest/company"),EXT:{PrepareQuery:function(a){a={query:a,mode:"",companylim:this.Options.limit,afilter:JSON.stringify(this.Options.filter)};if(this.Options.egrul_enable||!this.Options.egrip_enable)a.mode="egrul";this.Options.egrip_enable&&(a.mode+="|egrip");
return a},IsAllowedToSuggestOnFocus:function(){return this.Options.suggest_on_focus},OnChooseSuggestion:function(a){this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,a);if(this.Options.on_fetch){var c=$.extend({query:a.sign},this.Options.api_options);c.output=c.output?c.output+"|json":"json";this.Options.user&&(c.user=this.Options.user);$.ajax({type:"GET",url:this.Options.ahunter_url+"site/fetch/company",data:c,cache:!1,context:this,success:function(c){this.Options.on_fetch.call(this.Options.on_fetch_context,
a,c.company)}})}},SuggestionViewInList:function(a){return e.CompanySuggestionViewInList(a)},SuggestionViewInField:function(a){return a.name}},Init:function(){}};a.Init();var d=k(a.Options.id,a.Options.max_height,a.Options.z_index,a.Options.full_url,a.Options.empty_msg,a.Options.append_to,a.Options.on_edit,a.Options.on_edit_context,a.Options.api_options);return SolidSuggester=e.ExtendSuggester(d,a)}function v(a){a={Options:e.BuildFieldOptions(a,{},"site/suggest/bank"),EXT:{PrepareQuery:function(a){return{query:a,
mode:"",banklim:this.Options.limit,afilter:JSON.stringify(this.Options.filter)}},IsAllowedToSuggestOnFocus:function(){return this.Options.suggest_on_focus},OnChooseSuggestion:function(a){this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,a);if(this.Options.on_fetch){var c=$.extend({query:a.sign},this.Options.api_options);c.output=c.output?c.output+"|json":"json";this.Options.user&&(c.user=this.Options.user);$.ajax({type:"GET",url:this.Options.ahunter_url+"site/fetch/bank",
data:c,cache:!1,context:this,success:function(c){this.Options.on_fetch.call(this.Options.on_fetch_context,a,c.bank)}})}},SuggestionViewInList:function(a){return e.BankSuggestionViewInList(a)},SuggestionViewInField:function(a){return a.name}},Init:function(){}};a.Init();var d=k(a.Options.id,a.Options.max_height,a.Options.z_index,a.Options.full_url,a.Options.empty_msg,a.Options.append_to,a.Options.on_edit,a.Options.on_edit_context,a.Options.api_options);return SolidSuggester=e.ExtendSuggester(d,a)}
function w(a){a={Options:e.BuildFieldOptions(a,{},"site/suggest/company"),jAddressField:null,jPersonField:null,EXT:{PrepareQuery:function(a){var c="",d=f.CompanyFields.Name.sign;this.jAddressField?c+=f.CompanyFields.Address.sign+"["+this.jAddressField.val()+"]":d+=f.CompanyFields.Address.sign;this.jPersonField?c+=f.CompanyFields.Person.sign+"["+this.jPersonField.val()+"]":d+=f.CompanyFields.Person.sign;var e="discrete";this.Options.egrul_enable&&(e+="|egrul");this.Options.egrip_enable&&(e+="|egrip");
return{query:c+(d+"["+a+"]"),mode:e,companylim:this.Options.limit,afilter:JSON.stringify(this.Options.filter)}},ProcessedQueryForHighlight:function(a){var c="";this.jAddressField&&(c+=this.jAddressField.val()+" ");this.jPersonField&&(c+=this.jPersonField.val()+" ");return c+a},IsAllowedToSuggestOnFocus:function(){return this.Options.suggest_on_focus},OnChooseSuggestion:function(a){this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,a);if(this.Options.on_fetch){var c=
$.extend({query:a.sign},this.Options.api_options);c.output=c.output?c.output+"|json":"json";this.Options.user&&(c.user=this.Options.user);$.ajax({type:"GET",url:this.Options.ahunter_url+"site/fetch/company",data:c,cache:!1,context:this,success:function(c){this.Options.on_fetch.call(this.Options.on_fetch_context,a,c.company)}})}},SuggestionViewInList:function(a){return e.CompanySuggestionViewInList(a)},SuggestionViewInField:function(a){return a.name}},Init:function(){void 0!==this.Options.company_address_id&&
(this.jAddressField=e.GetField(this.Options.company_address_id));void 0!==this.Options.company_person_id&&(this.jPersonField=e.GetField(this.Options.company_person_id))}};a.Init();var d=k(a.Options.id,a.Options.max_height,a.Options.z_index,a.Options.full_url,a.Options.empty_msg,a.Options.append_to,a.Options.on_edit,a.Options.on_edit_context,a.Options.api_options);return DiscreteSuggester=e.ExtendSuggester(d,a)}function k(a,d,b,c,g,h,k,l,m){a={EXT:{PrepareQuery:function(a){return{query:a}},ProcessedQueryForHighlight:function(a){return a},
IsAllowedToSuggestOnFocus:function(){return!0},IsAllowedQuery:function(a,b){return a.query&&0<a.query.length&&0<b.length},OnEditField:function(a,b){k&&k.call(l,a,b)},OnChooseSuggestion:function(a){},SuggestionViewInList:function(a){return a.value},SuggestionViewInField:function(a){return a.value}},jField:e.GetField(a),SuggestionsClass:"u-AhunterSuggestions",SuggestionClass:"u-AhunterSuggestion",SuggestionSpecialClass:"u-AhunterSpecialSuggestion",SuggestionMainValueClass:"u-AhunterSuggestionMainValue",
SuggestionSubValueClass:"u-AhunterSuggestionSubValue",SelectedSuggestionClass:"u-AhunterSelectedSuggestion",EmptySuggestionClass:"u-AhunterEmptySuggestion",jSuggestions:$("<div></div>"),jAppendTo:"string"==typeof h&&"#"!==h[0]&&"."!==h[0]?$("#"+h):$(h),Suggestions:[],SelectedIndex:-1,UserValue:"",ShownValue:"",IsHidden:!0,GetValue:function(){return this.jField.val()},SplitText:function(a,b){for(var c=/[\s\\\/,;.\-"'<>\[\]()*]/gi,d=0;d<a.length;){var e=c.exec(a),e=null!==e?e.index:a.length;d<e&&b(d,
e);d=e+1}},FormatSuggestionValue:function(a){var b=this.EXT.ProcessedQueryForHighlight.call(this,this.UserValue),c=[];this.SplitText(b,function(a,d){c.push({word:b.substring(a,d).toLowerCase(),prefix:d==b.length})});var d="",f=0;this.SplitText(a,function(b,g){d+=a.substring(f,b);var n=a.substring(b,g).toLowerCase(),h=e.Find(c,function(a,b){return a.word==n||a.prefix&&a.word==n.substring(0,a.word.length)});h?(d+="<strong>"+a.substring(b,b+h.word.length)+"</strong>",d+=a.substring(b+h.word.length,g)):
d+=a.substring(b,g);f=g});d+=a.substring(f);d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>");return d},ShowSuggestions:function(){var a=!0;this.UpdatePosition();this.jSuggestions.empty();this.Suggestions||(this.Suggestions=[]);if(0<this.Suggestions.length)for(var b=0;b<this.Suggestions.length;b++){var c=this.EXT.SuggestionViewInList(this.Suggestions[b]);"string"==typeof c&&(c={Lines:[c],Special:!1});var d=$("<div>");$("<div>"+
this.FormatSuggestionValue(c.Lines[0])+"</div>").appendTo(d).addClass(this.SuggestionMainValueClass);for(var e=1;e<c.Lines.length;e++)$("<div>"+this.FormatSuggestionValue(c.Lines[e])+"</div>").appendTo(d).addClass(this.SuggestionSubValueClass);d.addClass(this.SuggestionClass);c.Special&&d.addClass(this.SuggestionSpecialClass);d.appendTo(this.jSuggestions)}else g?$("<div>"+g+"</div>").appendTo(this.jSuggestions).addClass(this.EmptySuggestionClass):a=!1;a?(this.jSuggestions.show(),this.IsHidden=!1,
this.HighliteSuggestion(this.SelectedIndex)):this.ClearSuggestions()},HideSuggestions:function(){this.jSuggestions.hide();this.IsHidden=!0},ClearSuggestions:function(){this.Suggestions=[];this.SelectedIndex=-1;this.jSuggestions.empty();this.HideSuggestions()},UpdatePosition:function(){var a=this.jField.position(),b=this.jField.offsetParent().offset(),c=this.jAppendTo.offset(),d=a.left+(b.left-c.left),a=a.top+(b.top-c.top);this.jSuggestions.detach();this.jSuggestions.appendTo(this.jAppendTo);this.jSuggestions.css("position",
"absolute");this.jSuggestions.css("left",d);this.jSuggestions.css("top",a+this.jField.outerHeight());this.jSuggestions.css("width",this.jField.outerWidth())},NavigateSuggestions:function(a){var b=!1;a.which==f.Keys.ESC?(b=!0,this.ResetField(this.UserValue),this.HideSuggestions()):a.which==f.Keys.DOWN&&0<this.Suggestions.length?(b=!0,this.IsHidden?(this.ShowSuggestions(),this.SelectSuggestion(this.SelectedIndex)):this.SelectSuggestion(this.SelectedIndex+1)):a.which==f.Keys.UP&&0<this.Suggestions.length?
(b=!0,this.IsHidden?(this.ShowSuggestions(),this.SelectSuggestion(this.SelectedIndex)):this.SelectSuggestion(this.SelectedIndex-1)):a.which==f.Keys.ENTER&&!this.IsHidden&&0<=this.SelectedIndex?(b=!0,this.SelectSuggestion(this.SelectedIndex),this.ResetField(this.ShownValue),this.EXT.OnChooseSuggestion.call(this,this.Suggestions[this.SelectedIndex]),this.ClearSuggestions()):a.which!=f.Keys.TAB||this.IsHidden||(0<=this.SelectedIndex?(this.SelectSuggestion(this.SelectedIndex),this.ResetField(this.ShownValue),
this.EXT.OnChooseSuggestion.call(this,this.Suggestions[this.SelectedIndex])):this.ResetField(this.UserValue),this.ClearSuggestions());return!b},SelectSuggestion:function(a){this.SelectedIndex=-1>a?this.Suggestions.length-1:a>=this.Suggestions.length?-1:a;-1!=this.SelectedIndex?(this.ShownValue=this.EXT.SuggestionViewInField(this.Suggestions[this.SelectedIndex]),this.jField.val(this.ShownValue)):this.ResetField(this.UserValue);this.HighliteSuggestion(this.SelectedIndex)},ResetField:function(a){this.ShownValue=
this.UserValue=a;this.jField.val(a)},HighliteSuggestion:function(a){this.jSuggestions.children().removeClass(this.SelectedSuggestionClass);-1!=a&&a<this.Suggestions.length&&(a=this.jSuggestions.children().get(a),$(a).addClass(this.SelectedSuggestionClass))},UpdateSuggestions:function(a){var b=this.jField.val(),d=!1;this.ShownValue!=b&&(d=!0,this.EXT.OnEditField(this.ShownValue,b));if(d||a){var e=this;e.ResetField(b);e.SelectedIndex=-1;a=this.EXT.PrepareQuery.call(this,b);this.EXT.IsAllowedQuery.call(this,
a,b)?(b=$.extend({ahungest:f.Version},a,m),b.output=b.output?b.output+"|json":"json",$.ajax({type:"GET",url:c,data:b,cache:!1,context:this,success:function(a){e.Suggestions=a.suggestions;e.ShowSuggestions()}})):e.ClearSuggestions()}},SetFocus:function(a){var b=this.EXT.IsAllowedToSuggestOnFocus;a&&(this.EXT.IsAllowedToSuggestOnFocus=function(){return!1});this.jField.focus();a&&(this.EXT.IsAllowedToSuggestOnFocus=b)},Init:function(){var a=this;this.ResetField(this.jField.val());this.jSuggestions.addClass(this.SuggestionsClass);
this.jSuggestions.css("max-height",d);this.jSuggestions.css("z-index",b);this.jSuggestions.hide();this.UpdatePosition();this.jField.attr("autocomplete","off");this.jSuggestions.on("mouseover"+f.EventsNamespace,"."+this.SuggestionClass,function(){a.SelectedIndex=$(this).index();a.HighliteSuggestion(a.SelectedIndex)});this.jSuggestions.on("mouseout"+f.EventsNamespace,function(){a.SelectedIndex=-1;a.HighliteSuggestion(a.SelectedIndex)});this.jSuggestions.on("mousedown"+f.EventsNamespace,"."+this.SuggestionClass,
function(b){if(1==b.which)return a.SelectedIndex=$(this).index(),a.SelectSuggestion(a.SelectedIndex),a.ResetField(a.ShownValue),a.EXT.OnChooseSuggestion.call(a,a.Suggestions[a.SelectedIndex]),a.ClearSuggestions(),a.SetFocus(!0),!1});this.jField.on("keydown"+f.EventsNamespace,function(b){return a.NavigateSuggestions(b)});this.jField.on("keyup"+f.EventsNamespace,function(){a.UpdateSuggestions()});this.jField.on("input"+f.EventsNamespace,function(){a.UpdateSuggestions()});this.jField.on("change"+f.EventsNamespace,
function(){a.UpdateSuggestions()});this.jField.on("blur"+f.EventsNamespace,function(){a.IsHidden||(a.ResetField(a.UserValue),a.ClearSuggestions())});this.jField.on("focus"+f.EventsNamespace,function(){a.EXT.IsAllowedToSuggestOnFocus.call(a)&&a.UpdateSuggestions(!0)});$(window).on("resize"+f.EventsNamespace,function(){a.UpdatePosition()})},Dispose:function(){this.jSuggestions.off(f.EventsNamespace);this.jField.off(f.EventsNamespace);$(window).off(f.EventsNamespace);this.jSuggestions.remove()}};a.Init();
return a}window.AhunterSuggest={Address:{Discrete:function(a){var d={obj:null,deffered:!1};$(document).ready(function(){d.obj=l(a)});this.Running.push(d);return d},Solid:function(a){var d={obj:null,deffered:!1};$(document).ready(function(){d.obj=p(a)});this.Running.push(d);return d},Running:[]},Person:{Discrete:function(a){var d={obj:null,deffered:!1};$(document).ready(function(){d.obj=q(a)});this.Running.push(d);return d},Solid:function(a){var d={obj:null,deffered:!1};$(document).ready(function(){d.obj=
t(a)});this.Running.push(d);return d},Running:[]},Company:{Discrete:function(a){var d={obj:null,deffered:!1};$(document).ready(function(){d.obj=w(a)});this.Running.push(d);return d},Solid:function(a){var d={obj:null,deffered:!1};$(document).ready(function(){d.obj=u(a)});this.Running.push(d);return d},Running:[]},Bank:{Solid:function(a){var d={obj:null,deffered:!1};$(document).ready(function(){d.obj=v(a)});this.Running.push(d);return d},Running:[]},Dispose:function(a){this.FindAndDispose(a,this.Address.Running);
this.FindAndDispose(a,this.Person.Running);this.FindAndDispose(a,this.Company.Running);this.FindAndDispose(a,this.Bank.Running);this.DisposeDeffered(this.Address.Running);this.DisposeDeffered(this.Person.Running);this.DisposeDeffered(this.Company.Running);this.DisposeDeffered(this.Bank.Running)},FindAndDispose:function(a,d){var b=e.FindIndex(d,function(b){return a==b});-1!=b&&(d[b].obj?(d[b].obj.Dispose(),d.splice(b,1)):d[b].deffered=!0)},DisposeDeffered:function(a){for(var d=a.length-1;0<=d;d--)a[d].deffered&&
a[d].obj&&(a[d].obj.Dispose(),a.splice(d,1))}};var f={Version:"3.4",EventsNamespace:".ahungest",AddressLevels:{Region:{name:"Region",sign:"r",num:0},District:{name:"District",sign:"d",num:1},City:{name:"City",sign:"c",num:2},Place:{name:"Place",sign:"p",num:3},Site:{name:"Site",sign:"t",num:4},Street:{name:"Street",sign:"s",num:5},House:{name:"House",sign:"h",num:6},Building:{name:"Building",sign:"b",num:7},Structure:{name:"Structure",sign:"u",num:8},Flat:{name:"Flat",sign:"f",num:9}},ZipLevel:{name:"Zip",
sign:"z"},CompanyFields:{Name:{name:"Name",sign:"n",num:0},Address:{name:"Address",sign:"a",num:1},Person:{name:"Person",sign:"p",num:2}},Keys:{ESC:27,TAB:9,ENTER:13,UP:38,DOWN:40},DefaultOptions:{ahunter_url:"https://ahunter.ru/",empty_msg:"Нет подходящей подсказки",limit:10,suggest_on_empty:!1,suggest_on_focus:!0,obsolete_names:!1,obsolete_objects:!1,z_index:9999,max_height:500,append_to:null,id:void 0,on_edit:void 0,on_edit_context:void 0,on_choose:void 0,on_choose_context:void 0,on_fetch:void 0,
on_fetch_context:void 0,user:void 0,api_options:void 0,filter:void 0,company_address_id:void 0,company_person_id:void 0,egrul_enable:!0,egrip_enable:!0,house_search:!0,stead_search:!0,country:""}},e={GetField:function(a){return"string"==typeof a&&"#"!==a[0]&&"."!==a[0]?$("#"+a):$(a)},FindIndex:function(a,d){for(var b=-1,c=0;c<a.length;c++)if(d(a[c])){b=c;break}return b},Find:function(a,d){var b=null,c=this.FindIndex(a,d);-1!=c&&(b=a[c]);return b},IsLessLevel:function(a,d){return f.AddressLevels[a].num<
f.AddressLevels[d].num},IsLessOrEqualLevel:function(a,d){return f.AddressLevels[a].num<=f.AddressLevels[d].num},IsNumericLevel:function(a){return f.AddressLevels[a].num>=f.AddressLevels.House.num},IsAddressLevel:function(a){return a in f.AddressLevels},FindAddressLevelBySign:function(a){var d="";for(Level in f.AddressLevels)if(f.AddressLevels[Level].sign==a){d=f.AddressLevels[Level].name;break}return d},GetLevelsSigns:function(a){for(var d="",b=0;b<a.length;b++)d+=f.AddressLevels[a[b]].sign;return d},
EscapeQuery:function(a){return a.replace(/([\\\[\]])/g,"\\$1")},DecodeMachineAddress:function(a){for(var d=[],b=0,c="",g={name:"",type:"",level:f.AddressLevels.Region.name};b<a.length;){if("\\"!=a[b]&&":"!=a[b]){var h=e.FindAddressLevelBySign(a[b]);""===h?c+=a[b]:(g.name=c,d.push(g),c="",g={name:"",type:"",level:h},g.level=h)}else"\\"==a[b]?(b++,b<a.length&&(c+=a[b])):":"==a[b]&&(g.type=c,c="");b++}0<c.length&&(g.name=c,d.push(g));return d},AddressFieldsDelta:function(a,d){for(var b=[],c=0,f=0;c<
a.length&&f<d.length;)if(e.IsLessLevel(a[c].level,d[f].level))b.push(a[c]),c++;else if(e.IsLessLevel(d[f].level,a[c].level)){0<c&&c--;break}else a[c].type==d[f].type&&a[c].name==d[f].name||b.push(a[c]),c++,f++;for(;c<a.length;)b.push(a[c]),c++;return b},AddressFieldsToString:function(a,d){for(var b=!1,c="",f=0;f<a.length;f++)c.length&&(c+=", "),c+=a[f].type+" "+a[f].name,e.IsNumericLevel(a[f].level)&&(b=!0);d&&!b&&(c+=", ");return c},AddressSuggestionViewInList:function(a){var d=a.value;if(a.f_machine||
a.a_machine){var b=e.DecodeMachineAddress(a.machine),c=null,f="";a.f_machine&&(c=e.DecodeMachineAddress(a.f_machine),f=e.AddressFieldsDelta(c,b),f=e.AddressFieldsToString(f));var h="";a.a_machine&&(a=e.DecodeMachineAddress(a.a_machine),b=e.AddressFieldsDelta(a,c?c:b),h=e.AddressFieldsToString(b));if(f||h)d+=" (",f&&(d+=" → "+f),h&&(d+=" ⇒ "+h),d+=" )"}return d},CompanySuggestionViewInList:function(a){return{Lines:[a.name,a.address,a.ogrn+", ИНН: "+a.inn+(0<a.person.length?", "+a.person:"")],Special:0==
a.state?!1:!0}},BankSuggestionViewInList:function(a){return{Lines:[a.name,a.address,"БИК: "+a.bic+(0<a.ogrn.length?", ОГРН: "+a.ogrn:"")],Special:0==a.state?!1:!0}},ExtendSuggester:function(a,d){var b=a.EXT;$.extend(a,d);a.EXT=$.extend(b,d.EXT);return a},SelectDefined:function(){for(var a,d=0;d<arguments.length;d++)if(void 0!==arguments[d]){a=arguments[d];break}return a},BuildFieldOptions:function(a,d,b){var c={};for(Name in f.DefaultOptions)c[Name]=e.SelectDefined(a[Name],d[Name],f.DefaultOptions[Name]);
"/"!=c.ahunter_url[c.ahunter_url.length-1]&&(c.ahunter_url+="/");c.append_to||(c.append_to=$(document.body));c.full_url=c.ahunter_url+b;return c}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJhaHVudGVyX3N1Z2dlc3QubWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIGwoYSl7YT17T3B0aW9uczphLGpaaXBGaWVsZDpudWxsLEZpZWxkczpbXSxGaWVsZHNCeUxldmVsczp7fSxCdWlsZFF1ZXJ5VXBUbzpmdW5jdGlvbihhKXtmb3IodmFyIGI9XCJcIixjPTAsZz0wO2c8dGhpcy5GaWVsZHMubGVuZ3RoO2crKylpZihlLklzTGVzc09yRXF1YWxMZXZlbCh0aGlzLkZpZWxkc1tnXS5NaW5MZXZlbCxhLk1pbkxldmVsKSl7dmFyIGg9dGhpcy5GaWVsZHNbZ10uR2V0VmFsdWUoKTtpZigwPGgubGVuZ3RofHx0aGlzLkZpZWxkc1tnXT09PWEpYis9ZS5HZXRMZXZlbHNTaWducyh0aGlzLkZpZWxkc1tnXS5MZXZlbHMpLGIrPVwiW1wiLGIrPWUuRXNjYXBlUXVlcnkoaCksYis9XCJdXCIsYys9aC5sZW5ndGh9ZWxzZSB0aGlzLkZpZWxkc1tnXS5DbGVhclZhbHVlKCk7dGhpcy5qWmlwRmllbGQmJihhPXRoaXMualppcEZpZWxkLnZhbCgpLGIrPWYuWmlwTGV2ZWwuc2lnbixiPWIrXCJbXCIrZS5Fc2NhcGVRdWVyeShhKSxiKz1cIl1cIixjKz1hLmxlbmd0aCk7XG5yZXR1cm4gMDxjP2I6XCJcIn0sSXNUYWlsRmllbGQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWUuRmluZCh0aGlzLkZpZWxkcyxmdW5jdGlvbihiKXtyZXR1cm4gZS5Jc0xlc3NMZXZlbChhLk1heExldmVsLGIuTWluTGV2ZWwpJiZcIlwiIT1iLkdldFZhbHVlKCl9KX0sUmVmcmVzaEZvcm06ZnVuY3Rpb24oYSxiKXt0aGlzLkNsZWFyQWxsRmllbGRzKCk7Zm9yKHZhciBjPW51bGwsZz0wO2c8Yi5sZW5ndGg7ZysrKWM9dGhpcy5GaWVsZHNCeUxldmVsc1tiW2ddLmxldmVsXSxjLkFwcGVuZFZhbHVlKGJbZ10udHlwZStcIiBcIitiW2ddLm5hbWUpO2MmJmMhPWEmJmMuU2V0Rm9jdXMoITApfSxDbGVhckFsbEZpZWxkczpmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8dGhpcy5GaWVsZHMubGVuZ3RoO2ErKyl0aGlzLkZpZWxkc1thXS5DbGVhclZhbHVlKCl9LEluaXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcyxiPTA7Yjx0aGlzLk9wdGlvbnMuZmllbGRzLmxlbmd0aDtiKyspdGhpcy5GaWVsZHMucHVzaChtKHRoaXMsXG50aGlzLk9wdGlvbnMuZmllbGRzW2JdKSk7Zm9yKGI9MDtiPHRoaXMuRmllbGRzLmxlbmd0aDtiKyspZm9yKExldmVsIGluIGYuQWRkcmVzc0xldmVscyllLklzTGVzc09yRXF1YWxMZXZlbCh0aGlzLkZpZWxkc1tiXS5NaW5MZXZlbCxMZXZlbCkmJmUuSXNMZXNzT3JFcXVhbExldmVsKExldmVsLHRoaXMuRmllbGRzW2JdLk1heExldmVsKSYmKHRoaXMuRmllbGRzQnlMZXZlbHNbTGV2ZWxdPXRoaXMuRmllbGRzW2JdKTt2b2lkIDAhPT10aGlzLk9wdGlvbnMuemlwX2ZpZWxkJiYoYj10aGlzLk9wdGlvbnMuemlwX2ZpZWxkLmlkLHRoaXMualppcEZpZWxkPVwic3RyaW5nXCI9PXR5cGVvZiBiJiZcIiNcIiE9PWJbMF0mJlwiLlwiIT09YlswXT8kKFwiI1wiK2IpOiQoYiksdGhpcy5qWmlwRmllbGQub24oXCJrZXl1cFwiK2YuRXZlbnRzTmFtZXNwYWNlLGZ1bmN0aW9uKCl7YS5DbGVhckFsbEZpZWxkcygpfSksdGhpcy5qWmlwRmllbGQub24oXCJpbnB1dFwiK2YuRXZlbnRzTmFtZXNwYWNlLGZ1bmN0aW9uKCl7YS5DbGVhckFsbEZpZWxkcygpfSksXG50aGlzLmpaaXBGaWVsZC5vbihcImNoYW5nZVwiK2YuRXZlbnRzTmFtZXNwYWNlLGZ1bmN0aW9uKCl7YS5DbGVhckFsbEZpZWxkcygpfSkpfSxEaXNwb3NlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLkZpZWxkcy5sZW5ndGg7YSsrKXRoaXMuRmllbGRzW2FdLkRpc3Bvc2UoKX19O2EuSW5pdCgpO3JldHVybiBhfWZ1bmN0aW9uIG0oYSxkKXt2YXIgYj17T3B0aW9uczplLkJ1aWxkRmllbGRPcHRpb25zKGQsYS5PcHRpb25zLFwic2l0ZS9zdWdnZXN0L2FkZHJlc3NcIiksQWRkcmVzc0Zvcm06YSxMZXZlbHM6ZC5sZXZlbHMsTWluTGV2ZWw6XCJcIixNYXhMZXZlbDpcIlwiLEVYVDp7UHJlcGFyZVF1ZXJ5OmZ1bmN0aW9uKGEpe2E9XCJkaXNjcmV0ZVwiO3RoaXMuT3B0aW9ucy5vYnNvbGV0ZV9uYW1lcyYmKGErPVwifG9ic25hbWVzXCIpO3RoaXMuT3B0aW9ucy5vYnNvbGV0ZV9vYmplY3RzJiYoYSs9XCJ8b2Jzb2JqZWN0c1wiKTtpZih0aGlzLk9wdGlvbnMuaG91c2Vfc2VhcmNofHwhdGhpcy5PcHRpb25zLnN0ZWFkX3NlYXJjaClhKz1cblwifGhvdXNlXCI7aWYodGhpcy5PcHRpb25zLnN0ZWFkX3NlYXJjaHx8IXRoaXMuT3B0aW9ucy5ob3VzZV9zZWFyY2gpYSs9XCJ8c3RlYWRcIjtyZXR1cm57cXVlcnk6dGhpcy5BZGRyZXNzRm9ybS5CdWlsZFF1ZXJ5VXBUbyh0aGlzKSxtb2RlOmEsYWRkcmVzc2xpbTp0aGlzLk9wdGlvbnMubGltaXQsY291bnRyeTp0aGlzLk9wdGlvbnMuY291bnRyeX19LElzQWxsb3dlZFRvU3VnZ2VzdE9uRm9jdXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5BZGRyZXNzRm9ybS5Jc1RhaWxGaWVsZCh0aGlzKSYmdGhpcy5PcHRpb25zLnN1Z2dlc3Rfb25fZm9jdXN9LElzQWxsb3dlZFF1ZXJ5OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5xdWVyeSYmMDxhLnF1ZXJ5Lmxlbmd0aD8hMDohMTtjJiYwPT1iLmxlbmd0aCYmKGM9dGhpcy5PcHRpb25zLnN1Z2dlc3Rfb25fZW1wdHkpO3JldHVybiBjfSxPbkNob29zZVN1Z2dlc3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9W10sYj1hLmFfbWFjaGluZT9lLkRlY29kZU1hY2hpbmVBZGRyZXNzKGEuYV9tYWNoaW5lKTpcbmEuZl9tYWNoaW5lP2UuRGVjb2RlTWFjaGluZUFkZHJlc3MoYS5mX21hY2hpbmUpOmUuRGVjb2RlTWFjaGluZUFkZHJlc3MoYS5tYWNoaW5lKTt0aGlzLkFkZHJlc3NGb3JtLlJlZnJlc2hGb3JtKHRoaXMsYik7dGhpcy5PcHRpb25zLm9uX2Nob29zZSYmdGhpcy5PcHRpb25zLm9uX2Nob29zZS5jYWxsKHRoaXMuT3B0aW9ucy5vbl9jaG9vc2VfY29udGV4dCxhKTt0aGlzLk9wdGlvbnMub25fZmV0Y2gmJihiPSQuZXh0ZW5kKHtxdWVyeTphLnNpZ259LHRoaXMuQWRkcmVzc0Zvcm0uT3B0aW9ucy5hcGlfb3B0aW9ucyksYi5vdXRwdXQ9Yi5vdXRwdXQ/Yi5vdXRwdXQrXCJ8anNvblwiOlwianNvblwiLHRoaXMuT3B0aW9ucy51c2VyJiYoYi51c2VyPXRoaXMuT3B0aW9ucy51c2VyKSwkLmFqYXgoe3R5cGU6XCJHRVRcIix1cmw6dGhpcy5PcHRpb25zLmFodW50ZXJfdXJsK1wic2l0ZS9mZXRjaC9hZGRyZXNzXCIsZGF0YTpiLGNhY2hlOiExLGNvbnRleHQ6dGhpcyxzdWNjZXNzOmZ1bmN0aW9uKGIpe3RoaXMuT3B0aW9ucy5vbl9mZXRjaC5jYWxsKHRoaXMuT3B0aW9ucy5vbl9mZXRjaF9jb250ZXh0LFxuYSxiLmFkZHJlc3MpfX0pKX0sU3VnZ2VzdGlvblZpZXdJbkxpc3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIGUuQWRkcmVzc1N1Z2dlc3Rpb25WaWV3SW5MaXN0KGEpfSxTdWdnZXN0aW9uVmlld0luRmllbGQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudmFsdWV9fSxDbGVhclZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5SZXNldEZpZWxkKFwiXCIpO3RoaXMuQ2xlYXJTdWdnZXN0aW9ucygpfSxBcHBlbmRWYWx1ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLkdldFZhbHVlKCk7YiYmKGIrPVwiLCBcIik7dGhpcy5SZXNldEZpZWxkKGIrYSl9LEluaXQ6ZnVuY3Rpb24oKXt0aGlzLk1pbkxldmVsPWYuQWRkcmVzc0xldmVscy5GbGF0Lm5hbWU7dGhpcy5NYXhMZXZlbD1mLkFkZHJlc3NMZXZlbHMuUmVnaW9uLm5hbWU7Zm9yKHZhciBhPTA7YTx0aGlzLkxldmVscy5sZW5ndGg7YSsrKWUuSXNMZXNzTGV2ZWwodGhpcy5MZXZlbHNbYV0sdGhpcy5NaW5MZXZlbCkmJih0aGlzLk1pbkxldmVsPXRoaXMuTGV2ZWxzW2FdKSxcbmUuSXNMZXNzTGV2ZWwodGhpcy5NYXhMZXZlbCx0aGlzLkxldmVsc1thXSkmJih0aGlzLk1heExldmVsPXRoaXMuTGV2ZWxzW2FdKTt2b2lkIDA9PT1kLmVtcHR5X21zZyYmdGhpcy5NaW5MZXZlbD09PWYuQWRkcmVzc0xldmVscy5GbGF0Lm5hbWUmJih0aGlzLk9wdGlvbnMuZW1wdHlfbXNnPVwiXCIpfX07Yi5Jbml0KCk7dmFyIGM9ayhiLk9wdGlvbnMuaWQsYi5PcHRpb25zLm1heF9oZWlnaHQsYi5PcHRpb25zLnpfaW5kZXgsYi5PcHRpb25zLmZ1bGxfdXJsLGIuT3B0aW9ucy5lbXB0eV9tc2csYi5PcHRpb25zLmFwcGVuZF90byxiLk9wdGlvbnMub25fZWRpdCxiLk9wdGlvbnMub25fZWRpdF9jb250ZXh0LGIuT3B0aW9ucy5hcGlfb3B0aW9ucyk7cmV0dXJuIGUuRXh0ZW5kU3VnZ2VzdGVyKGMsYil9ZnVuY3Rpb24gcChhKXthPXtPcHRpb25zOmUuQnVpbGRGaWVsZE9wdGlvbnMoYSx7fSxcInNpdGUvc3VnZ2VzdC9hZGRyZXNzXCIpLEVYVDp7UHJlcGFyZVF1ZXJ5OmZ1bmN0aW9uKGEpe2E9XG57cXVlcnk6YSxhZGRyZXNzbGltOnRoaXMuT3B0aW9ucy5saW1pdCxjb3VudHJ5OnRoaXMuT3B0aW9ucy5jb3VudHJ5fTt2YXIgYz1cIlwiO3RoaXMuT3B0aW9ucy5vYnNvbGV0ZV9uYW1lcyYmKGMrPVwib2JzbmFtZXN8XCIpO3RoaXMuT3B0aW9ucy5vYnNvbGV0ZV9vYmplY3RzJiYoYys9XCJvYnNvYmplY3RzfFwiKTtpZih0aGlzLk9wdGlvbnMuaG91c2Vfc2VhcmNofHwhdGhpcy5PcHRpb25zLnN0ZWFkX3NlYXJjaCljKz1cImhvdXNlfFwiO2lmKHRoaXMuT3B0aW9ucy5zdGVhZF9zZWFyY2h8fCF0aGlzLk9wdGlvbnMuaG91c2Vfc2VhcmNoKWMrPVwic3RlYWR8XCI7MDxjLmxlbmd0aCYmKGEubW9kZT1jKTtyZXR1cm4gYX0sSXNBbGxvd2VkVG9TdWdnZXN0T25Gb2N1czpmdW5jdGlvbigpe3JldHVybiB0aGlzLk9wdGlvbnMuc3VnZ2VzdF9vbl9mb2N1c30sT25DaG9vc2VTdWdnZXN0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuT3B0aW9ucy5vbl9jaG9vc2UmJnRoaXMuT3B0aW9ucy5vbl9jaG9vc2UuY2FsbCh0aGlzLk9wdGlvbnMub25fY2hvb3NlX2NvbnRleHQsXG5hKTtpZih0aGlzLk9wdGlvbnMub25fZmV0Y2gpe3ZhciBjPSQuZXh0ZW5kKHtxdWVyeTphLnNpZ259LHRoaXMuT3B0aW9ucy5hcGlfb3B0aW9ucyk7Yy5vdXRwdXQ9Yy5vdXRwdXQ/Yy5vdXRwdXQrXCJ8anNvblwiOlwianNvblwiO3RoaXMuT3B0aW9ucy51c2VyJiYoYy51c2VyPXRoaXMuT3B0aW9ucy51c2VyKTskLmFqYXgoe3R5cGU6XCJHRVRcIix1cmw6dGhpcy5PcHRpb25zLmFodW50ZXJfdXJsK1wic2l0ZS9mZXRjaC9hZGRyZXNzXCIsZGF0YTpjLGNhY2hlOiExLGNvbnRleHQ6dGhpcyxzdWNjZXNzOmZ1bmN0aW9uKGMpe3RoaXMuT3B0aW9ucy5vbl9mZXRjaC5jYWxsKHRoaXMuT3B0aW9ucy5vbl9mZXRjaF9jb250ZXh0LGEsYy5hZGRyZXNzKX19KX19LFN1Z2dlc3Rpb25WaWV3SW5MaXN0OmZ1bmN0aW9uKGEpe3JldHVybiBlLkFkZHJlc3NTdWdnZXN0aW9uVmlld0luTGlzdChhKX0sU3VnZ2VzdGlvblZpZXdJbkZpZWxkOmZ1bmN0aW9uKGEpe3ZhciBjPW51bGwsYz1hLmFfbWFjaGluZT9lLkRlY29kZU1hY2hpbmVBZGRyZXNzKGEuYV9tYWNoaW5lKTpcbmEuZl9tYWNoaW5lP2UuRGVjb2RlTWFjaGluZUFkZHJlc3MoYS5mX21hY2hpbmUpOmUuRGVjb2RlTWFjaGluZUFkZHJlc3MoYS5tYWNoaW5lKTtyZXR1cm4gZS5BZGRyZXNzRmllbGRzVG9TdHJpbmcoYywhMCl9fSxJbml0OmZ1bmN0aW9uKCl7fX07YS5Jbml0KCk7dmFyIGQ9ayhhLk9wdGlvbnMuaWQsYS5PcHRpb25zLm1heF9oZWlnaHQsYS5PcHRpb25zLnpfaW5kZXgsYS5PcHRpb25zLmZ1bGxfdXJsLGEuT3B0aW9ucy5lbXB0eV9tc2csYS5PcHRpb25zLmFwcGVuZF90byxhLk9wdGlvbnMub25fZWRpdCxhLk9wdGlvbnMub25fZWRpdF9jb250ZXh0LGEuT3B0aW9ucy5hcGlfb3B0aW9ucyk7cmV0dXJuIGUuRXh0ZW5kU3VnZ2VzdGVyKGQsYSl9ZnVuY3Rpb24gcShhKXthPXtPcHRpb25zOmEsRmllbGRzOltdLEJ1aWxkUXVlcnlXaXRoQWN0aXZlRmllbGQ6ZnVuY3Rpb24oYSl7cmV0dXJue2FjdGl2ZTphLlRhZyxsYXN0X25hbWU6dGhpcy5HZXRGaWVsZFZhbHVlKFwibGFzdF9uYW1lXCIpLFxuZmlyc3RfbmFtZTp0aGlzLkdldEZpZWxkVmFsdWUoXCJmaXJzdF9uYW1lXCIpLHBhdHJvbnltOnRoaXMuR2V0RmllbGRWYWx1ZShcInBhdHJvbnltXCIpfX0sR2V0RmllbGRWYWx1ZTpmdW5jdGlvbihhKXt2YXIgYj1lLkZpbmQodGhpcy5GaWVsZHMsZnVuY3Rpb24oYil7cmV0dXJuIGIuVGFnPT1hfSk7cmV0dXJuIG51bGwhPWI/Yi5HZXRWYWx1ZSgpOlwiXCJ9LEdldFBlcnNvbjpmdW5jdGlvbigpe2Zvcih2YXIgYT17bGFzdF9uYW1lOnRoaXMuR2V0RmllbGRWYWx1ZShcImxhc3RfbmFtZVwiKSxmaXJzdF9uYW1lOnRoaXMuR2V0RmllbGRWYWx1ZShcImZpcnN0X25hbWVcIikscGF0cm9ueW06dGhpcy5HZXRGaWVsZFZhbHVlKFwicGF0cm9ueW1cIiksZnVsbF9uYW1lOlwiXCJ9LGI9MDtiPHRoaXMuRmllbGRzLmxlbmd0aDtiKyspYS5mdWxsX25hbWUubGVuZ3RoJiZ0aGlzLkZpZWxkc1tiXS5HZXRWYWx1ZSgpLmxlbmd0aCYmKGEuZnVsbF9uYW1lKz1cIiBcIiksYS5mdWxsX25hbWUrPXRoaXMuRmllbGRzW2JdLkdldFZhbHVlKCk7XG5yZXR1cm4gYX0sSW5pdDpmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8dGhpcy5PcHRpb25zLmZpZWxkcy5sZW5ndGg7YSsrKXRoaXMuRmllbGRzLnB1c2gocih0aGlzLHRoaXMuT3B0aW9ucy5maWVsZHNbYV0pKX0sRGlzcG9zZTpmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8dGhpcy5GaWVsZHMubGVuZ3RoO2ErKyl0aGlzLkZpZWxkc1thXS5EaXNwb3NlKCl9fTthLkluaXQoKTtyZXR1cm4gYX1mdW5jdGlvbiByKGEsZCl7dmFyIGI9e09wdGlvbnM6ZS5CdWlsZEZpZWxkT3B0aW9ucyhkLGEuT3B0aW9ucyxcInNpdGUvc3VnZ2VzdC9wZXJzb25cIiksUGVyc29uRm9ybTphLFRhZzpkLnRhZyxFWFQ6e1ByZXBhcmVRdWVyeTpmdW5jdGlvbihhKXtyZXR1cm4gJC5leHRlbmQodGhpcy5QZXJzb25Gb3JtLkJ1aWxkUXVlcnlXaXRoQWN0aXZlRmllbGQodGhpcykse3BlcnNvbmxpbTp0aGlzLk9wdGlvbnMubGltaXR9KX0sSXNBbGxvd2VkVG9TdWdnZXN0T25Gb2N1czpmdW5jdGlvbigpe3JldHVybiB0aGlzLk9wdGlvbnMuc3VnZ2VzdF9vbl9mb2N1c30sXG5Jc0FsbG93ZWRRdWVyeTpmdW5jdGlvbihhLGIpe3JldHVybiAwPGIubGVuZ3RofSxPbkNob29zZVN1Z2dlc3Rpb246ZnVuY3Rpb24oYSl7dGhpcy5PcHRpb25zLm9uX2Nob29zZSYmdGhpcy5PcHRpb25zLm9uX2Nob29zZS5jYWxsKHRoaXMuT3B0aW9ucy5vbl9jaG9vc2VfY29udGV4dCxhKTt0aGlzLk9wdGlvbnMub25fZmV0Y2gmJnRoaXMuT3B0aW9ucy5vbl9mZXRjaC5jYWxsKHRoaXMuT3B0aW9ucy5vbl9mZXRjaF9jb250ZXh0LGEsdGhpcy5QZXJzb25Gb3JtLkdldFBlcnNvbigpKX19LEluaXQ6ZnVuY3Rpb24oKXt9fTtiLkluaXQoKTt2YXIgYz1rKGIuT3B0aW9ucy5pZCxiLk9wdGlvbnMubWF4X2hlaWdodCxiLk9wdGlvbnMuel9pbmRleCxiLk9wdGlvbnMuZnVsbF91cmwsYi5PcHRpb25zLmVtcHR5X21zZyxiLk9wdGlvbnMuYXBwZW5kX3RvLGIuT3B0aW9ucy5vbl9lZGl0LGIuT3B0aW9ucy5vbl9lZGl0X2NvbnRleHQsYi5PcHRpb25zLmFwaV9vcHRpb25zKTtyZXR1cm4gZS5FeHRlbmRTdWdnZXN0ZXIoYyxcbmIpfWZ1bmN0aW9uIHQoYSl7YT17T3B0aW9uczplLkJ1aWxkRmllbGRPcHRpb25zKGEse30sXCJzaXRlL3N1Z2dlc3QvcGVyc29uXCIpLEVYVDp7UHJlcGFyZVF1ZXJ5OmZ1bmN0aW9uKGEpe3JldHVybntxdWVyeTphLHBlcnNvbmxpbTp0aGlzLk9wdGlvbnMubGltaXR9fSxJc0FsbG93ZWRUb1N1Z2dlc3RPbkZvY3VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuT3B0aW9ucy5zdWdnZXN0X29uX2ZvY3VzfSxPbkNob29zZVN1Z2dlc3Rpb246ZnVuY3Rpb24oYSl7dGhpcy5PcHRpb25zLm9uX2Nob29zZSYmdGhpcy5PcHRpb25zLm9uX2Nob29zZS5jYWxsKHRoaXMuT3B0aW9ucy5vbl9jaG9vc2VfY29udGV4dCxhKTt0aGlzLk9wdGlvbnMub25fZmV0Y2gmJnRoaXMuT3B0aW9ucy5vbl9mZXRjaC5jYWxsKHRoaXMuT3B0aW9ucy5vbl9mZXRjaF9jb250ZXh0LGEse2Z1bGxfbmFtZTphLnZhbHVlfSl9fSxJbml0OmZ1bmN0aW9uKCl7fX07YS5Jbml0KCk7dmFyIGQ9ayhhLk9wdGlvbnMuaWQsYS5PcHRpb25zLm1heF9oZWlnaHQsXG5hLk9wdGlvbnMuel9pbmRleCxhLk9wdGlvbnMuZnVsbF91cmwsYS5PcHRpb25zLmVtcHR5X21zZyxhLk9wdGlvbnMuYXBwZW5kX3RvLGEuT3B0aW9ucy5vbl9lZGl0LGEuT3B0aW9ucy5vbl9lZGl0X2NvbnRleHQsYS5PcHRpb25zLmFwaV9vcHRpb25zKTtyZXR1cm4gU29saWRTdWdnZXN0ZXI9ZS5FeHRlbmRTdWdnZXN0ZXIoZCxhKX1mdW5jdGlvbiB1KGEpe2E9e09wdGlvbnM6ZS5CdWlsZEZpZWxkT3B0aW9ucyhhLHt9LFwic2l0ZS9zdWdnZXN0L2NvbXBhbnlcIiksRVhUOntQcmVwYXJlUXVlcnk6ZnVuY3Rpb24oYSl7YT17cXVlcnk6YSxtb2RlOlwiXCIsY29tcGFueWxpbTp0aGlzLk9wdGlvbnMubGltaXQsYWZpbHRlcjpKU09OLnN0cmluZ2lmeSh0aGlzLk9wdGlvbnMuZmlsdGVyKX07aWYodGhpcy5PcHRpb25zLmVncnVsX2VuYWJsZXx8IXRoaXMuT3B0aW9ucy5lZ3JpcF9lbmFibGUpYS5tb2RlPVwiZWdydWxcIjt0aGlzLk9wdGlvbnMuZWdyaXBfZW5hYmxlJiYoYS5tb2RlKz1cInxlZ3JpcFwiKTtcbnJldHVybiBhfSxJc0FsbG93ZWRUb1N1Z2dlc3RPbkZvY3VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuT3B0aW9ucy5zdWdnZXN0X29uX2ZvY3VzfSxPbkNob29zZVN1Z2dlc3Rpb246ZnVuY3Rpb24oYSl7dGhpcy5PcHRpb25zLm9uX2Nob29zZSYmdGhpcy5PcHRpb25zLm9uX2Nob29zZS5jYWxsKHRoaXMuT3B0aW9ucy5vbl9jaG9vc2VfY29udGV4dCxhKTtpZih0aGlzLk9wdGlvbnMub25fZmV0Y2gpe3ZhciBjPSQuZXh0ZW5kKHtxdWVyeTphLnNpZ259LHRoaXMuT3B0aW9ucy5hcGlfb3B0aW9ucyk7Yy5vdXRwdXQ9Yy5vdXRwdXQ/Yy5vdXRwdXQrXCJ8anNvblwiOlwianNvblwiO3RoaXMuT3B0aW9ucy51c2VyJiYoYy51c2VyPXRoaXMuT3B0aW9ucy51c2VyKTskLmFqYXgoe3R5cGU6XCJHRVRcIix1cmw6dGhpcy5PcHRpb25zLmFodW50ZXJfdXJsK1wic2l0ZS9mZXRjaC9jb21wYW55XCIsZGF0YTpjLGNhY2hlOiExLGNvbnRleHQ6dGhpcyxzdWNjZXNzOmZ1bmN0aW9uKGMpe3RoaXMuT3B0aW9ucy5vbl9mZXRjaC5jYWxsKHRoaXMuT3B0aW9ucy5vbl9mZXRjaF9jb250ZXh0LFxuYSxjLmNvbXBhbnkpfX0pfX0sU3VnZ2VzdGlvblZpZXdJbkxpc3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIGUuQ29tcGFueVN1Z2dlc3Rpb25WaWV3SW5MaXN0KGEpfSxTdWdnZXN0aW9uVmlld0luRmllbGQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubmFtZX19LEluaXQ6ZnVuY3Rpb24oKXt9fTthLkluaXQoKTt2YXIgZD1rKGEuT3B0aW9ucy5pZCxhLk9wdGlvbnMubWF4X2hlaWdodCxhLk9wdGlvbnMuel9pbmRleCxhLk9wdGlvbnMuZnVsbF91cmwsYS5PcHRpb25zLmVtcHR5X21zZyxhLk9wdGlvbnMuYXBwZW5kX3RvLGEuT3B0aW9ucy5vbl9lZGl0LGEuT3B0aW9ucy5vbl9lZGl0X2NvbnRleHQsYS5PcHRpb25zLmFwaV9vcHRpb25zKTtyZXR1cm4gU29saWRTdWdnZXN0ZXI9ZS5FeHRlbmRTdWdnZXN0ZXIoZCxhKX1mdW5jdGlvbiB2KGEpe2E9e09wdGlvbnM6ZS5CdWlsZEZpZWxkT3B0aW9ucyhhLHt9LFwic2l0ZS9zdWdnZXN0L2JhbmtcIiksRVhUOntQcmVwYXJlUXVlcnk6ZnVuY3Rpb24oYSl7cmV0dXJue3F1ZXJ5OmEsXG5tb2RlOlwiXCIsYmFua2xpbTp0aGlzLk9wdGlvbnMubGltaXQsYWZpbHRlcjpKU09OLnN0cmluZ2lmeSh0aGlzLk9wdGlvbnMuZmlsdGVyKX19LElzQWxsb3dlZFRvU3VnZ2VzdE9uRm9jdXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5PcHRpb25zLnN1Z2dlc3Rfb25fZm9jdXN9LE9uQ2hvb3NlU3VnZ2VzdGlvbjpmdW5jdGlvbihhKXt0aGlzLk9wdGlvbnMub25fY2hvb3NlJiZ0aGlzLk9wdGlvbnMub25fY2hvb3NlLmNhbGwodGhpcy5PcHRpb25zLm9uX2Nob29zZV9jb250ZXh0LGEpO2lmKHRoaXMuT3B0aW9ucy5vbl9mZXRjaCl7dmFyIGM9JC5leHRlbmQoe3F1ZXJ5OmEuc2lnbn0sdGhpcy5PcHRpb25zLmFwaV9vcHRpb25zKTtjLm91dHB1dD1jLm91dHB1dD9jLm91dHB1dCtcInxqc29uXCI6XCJqc29uXCI7dGhpcy5PcHRpb25zLnVzZXImJihjLnVzZXI9dGhpcy5PcHRpb25zLnVzZXIpOyQuYWpheCh7dHlwZTpcIkdFVFwiLHVybDp0aGlzLk9wdGlvbnMuYWh1bnRlcl91cmwrXCJzaXRlL2ZldGNoL2JhbmtcIixcbmRhdGE6YyxjYWNoZTohMSxjb250ZXh0OnRoaXMsc3VjY2VzczpmdW5jdGlvbihjKXt0aGlzLk9wdGlvbnMub25fZmV0Y2guY2FsbCh0aGlzLk9wdGlvbnMub25fZmV0Y2hfY29udGV4dCxhLGMuYmFuayl9fSl9fSxTdWdnZXN0aW9uVmlld0luTGlzdDpmdW5jdGlvbihhKXtyZXR1cm4gZS5CYW5rU3VnZ2VzdGlvblZpZXdJbkxpc3QoYSl9LFN1Z2dlc3Rpb25WaWV3SW5GaWVsZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5uYW1lfX0sSW5pdDpmdW5jdGlvbigpe319O2EuSW5pdCgpO3ZhciBkPWsoYS5PcHRpb25zLmlkLGEuT3B0aW9ucy5tYXhfaGVpZ2h0LGEuT3B0aW9ucy56X2luZGV4LGEuT3B0aW9ucy5mdWxsX3VybCxhLk9wdGlvbnMuZW1wdHlfbXNnLGEuT3B0aW9ucy5hcHBlbmRfdG8sYS5PcHRpb25zLm9uX2VkaXQsYS5PcHRpb25zLm9uX2VkaXRfY29udGV4dCxhLk9wdGlvbnMuYXBpX29wdGlvbnMpO3JldHVybiBTb2xpZFN1Z2dlc3Rlcj1lLkV4dGVuZFN1Z2dlc3RlcihkLGEpfVxuZnVuY3Rpb24gdyhhKXthPXtPcHRpb25zOmUuQnVpbGRGaWVsZE9wdGlvbnMoYSx7fSxcInNpdGUvc3VnZ2VzdC9jb21wYW55XCIpLGpBZGRyZXNzRmllbGQ6bnVsbCxqUGVyc29uRmllbGQ6bnVsbCxFWFQ6e1ByZXBhcmVRdWVyeTpmdW5jdGlvbihhKXt2YXIgYz1cIlwiLGQ9Zi5Db21wYW55RmllbGRzLk5hbWUuc2lnbjt0aGlzLmpBZGRyZXNzRmllbGQ/Yys9Zi5Db21wYW55RmllbGRzLkFkZHJlc3Muc2lnbitcIltcIit0aGlzLmpBZGRyZXNzRmllbGQudmFsKCkrXCJdXCI6ZCs9Zi5Db21wYW55RmllbGRzLkFkZHJlc3Muc2lnbjt0aGlzLmpQZXJzb25GaWVsZD9jKz1mLkNvbXBhbnlGaWVsZHMuUGVyc29uLnNpZ24rXCJbXCIrdGhpcy5qUGVyc29uRmllbGQudmFsKCkrXCJdXCI6ZCs9Zi5Db21wYW55RmllbGRzLlBlcnNvbi5zaWduO3ZhciBlPVwiZGlzY3JldGVcIjt0aGlzLk9wdGlvbnMuZWdydWxfZW5hYmxlJiYoZSs9XCJ8ZWdydWxcIik7dGhpcy5PcHRpb25zLmVncmlwX2VuYWJsZSYmKGUrPVwifGVncmlwXCIpO1xucmV0dXJue3F1ZXJ5OmMrKGQrXCJbXCIrYStcIl1cIiksbW9kZTplLGNvbXBhbnlsaW06dGhpcy5PcHRpb25zLmxpbWl0LGFmaWx0ZXI6SlNPTi5zdHJpbmdpZnkodGhpcy5PcHRpb25zLmZpbHRlcil9fSxQcm9jZXNzZWRRdWVyeUZvckhpZ2hsaWdodDpmdW5jdGlvbihhKXt2YXIgYz1cIlwiO3RoaXMuakFkZHJlc3NGaWVsZCYmKGMrPXRoaXMuakFkZHJlc3NGaWVsZC52YWwoKStcIiBcIik7dGhpcy5qUGVyc29uRmllbGQmJihjKz10aGlzLmpQZXJzb25GaWVsZC52YWwoKStcIiBcIik7cmV0dXJuIGMrYX0sSXNBbGxvd2VkVG9TdWdnZXN0T25Gb2N1czpmdW5jdGlvbigpe3JldHVybiB0aGlzLk9wdGlvbnMuc3VnZ2VzdF9vbl9mb2N1c30sT25DaG9vc2VTdWdnZXN0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuT3B0aW9ucy5vbl9jaG9vc2UmJnRoaXMuT3B0aW9ucy5vbl9jaG9vc2UuY2FsbCh0aGlzLk9wdGlvbnMub25fY2hvb3NlX2NvbnRleHQsYSk7aWYodGhpcy5PcHRpb25zLm9uX2ZldGNoKXt2YXIgYz1cbiQuZXh0ZW5kKHtxdWVyeTphLnNpZ259LHRoaXMuT3B0aW9ucy5hcGlfb3B0aW9ucyk7Yy5vdXRwdXQ9Yy5vdXRwdXQ/Yy5vdXRwdXQrXCJ8anNvblwiOlwianNvblwiO3RoaXMuT3B0aW9ucy51c2VyJiYoYy51c2VyPXRoaXMuT3B0aW9ucy51c2VyKTskLmFqYXgoe3R5cGU6XCJHRVRcIix1cmw6dGhpcy5PcHRpb25zLmFodW50ZXJfdXJsK1wic2l0ZS9mZXRjaC9jb21wYW55XCIsZGF0YTpjLGNhY2hlOiExLGNvbnRleHQ6dGhpcyxzdWNjZXNzOmZ1bmN0aW9uKGMpe3RoaXMuT3B0aW9ucy5vbl9mZXRjaC5jYWxsKHRoaXMuT3B0aW9ucy5vbl9mZXRjaF9jb250ZXh0LGEsYy5jb21wYW55KX19KX19LFN1Z2dlc3Rpb25WaWV3SW5MaXN0OmZ1bmN0aW9uKGEpe3JldHVybiBlLkNvbXBhbnlTdWdnZXN0aW9uVmlld0luTGlzdChhKX0sU3VnZ2VzdGlvblZpZXdJbkZpZWxkOmZ1bmN0aW9uKGEpe3JldHVybiBhLm5hbWV9fSxJbml0OmZ1bmN0aW9uKCl7dm9pZCAwIT09dGhpcy5PcHRpb25zLmNvbXBhbnlfYWRkcmVzc19pZCYmXG4odGhpcy5qQWRkcmVzc0ZpZWxkPWUuR2V0RmllbGQodGhpcy5PcHRpb25zLmNvbXBhbnlfYWRkcmVzc19pZCkpO3ZvaWQgMCE9PXRoaXMuT3B0aW9ucy5jb21wYW55X3BlcnNvbl9pZCYmKHRoaXMualBlcnNvbkZpZWxkPWUuR2V0RmllbGQodGhpcy5PcHRpb25zLmNvbXBhbnlfcGVyc29uX2lkKSl9fTthLkluaXQoKTt2YXIgZD1rKGEuT3B0aW9ucy5pZCxhLk9wdGlvbnMubWF4X2hlaWdodCxhLk9wdGlvbnMuel9pbmRleCxhLk9wdGlvbnMuZnVsbF91cmwsYS5PcHRpb25zLmVtcHR5X21zZyxhLk9wdGlvbnMuYXBwZW5kX3RvLGEuT3B0aW9ucy5vbl9lZGl0LGEuT3B0aW9ucy5vbl9lZGl0X2NvbnRleHQsYS5PcHRpb25zLmFwaV9vcHRpb25zKTtyZXR1cm4gRGlzY3JldGVTdWdnZXN0ZXI9ZS5FeHRlbmRTdWdnZXN0ZXIoZCxhKX1mdW5jdGlvbiBrKGEsZCxiLGMsZyxoLGssbCxtKXthPXtFWFQ6e1ByZXBhcmVRdWVyeTpmdW5jdGlvbihhKXtyZXR1cm57cXVlcnk6YX19LFByb2Nlc3NlZFF1ZXJ5Rm9ySGlnaGxpZ2h0OmZ1bmN0aW9uKGEpe3JldHVybiBhfSxcbklzQWxsb3dlZFRvU3VnZ2VzdE9uRm9jdXM6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sSXNBbGxvd2VkUXVlcnk6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5xdWVyeSYmMDxhLnF1ZXJ5Lmxlbmd0aCYmMDxiLmxlbmd0aH0sT25FZGl0RmllbGQ6ZnVuY3Rpb24oYSxiKXtrJiZrLmNhbGwobCxhLGIpfSxPbkNob29zZVN1Z2dlc3Rpb246ZnVuY3Rpb24oYSl7fSxTdWdnZXN0aW9uVmlld0luTGlzdDpmdW5jdGlvbihhKXtyZXR1cm4gYS52YWx1ZX0sU3VnZ2VzdGlvblZpZXdJbkZpZWxkOmZ1bmN0aW9uKGEpe3JldHVybiBhLnZhbHVlfX0sakZpZWxkOmUuR2V0RmllbGQoYSksU3VnZ2VzdGlvbnNDbGFzczpcInUtQWh1bnRlclN1Z2dlc3Rpb25zXCIsU3VnZ2VzdGlvbkNsYXNzOlwidS1BaHVudGVyU3VnZ2VzdGlvblwiLFN1Z2dlc3Rpb25TcGVjaWFsQ2xhc3M6XCJ1LUFodW50ZXJTcGVjaWFsU3VnZ2VzdGlvblwiLFN1Z2dlc3Rpb25NYWluVmFsdWVDbGFzczpcInUtQWh1bnRlclN1Z2dlc3Rpb25NYWluVmFsdWVcIixcblN1Z2dlc3Rpb25TdWJWYWx1ZUNsYXNzOlwidS1BaHVudGVyU3VnZ2VzdGlvblN1YlZhbHVlXCIsU2VsZWN0ZWRTdWdnZXN0aW9uQ2xhc3M6XCJ1LUFodW50ZXJTZWxlY3RlZFN1Z2dlc3Rpb25cIixFbXB0eVN1Z2dlc3Rpb25DbGFzczpcInUtQWh1bnRlckVtcHR5U3VnZ2VzdGlvblwiLGpTdWdnZXN0aW9uczokKFwiPGRpdj48L2Rpdj5cIiksakFwcGVuZFRvOlwic3RyaW5nXCI9PXR5cGVvZiBoJiZcIiNcIiE9PWhbMF0mJlwiLlwiIT09aFswXT8kKFwiI1wiK2gpOiQoaCksU3VnZ2VzdGlvbnM6W10sU2VsZWN0ZWRJbmRleDotMSxVc2VyVmFsdWU6XCJcIixTaG93blZhbHVlOlwiXCIsSXNIaWRkZW46ITAsR2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5qRmllbGQudmFsKCl9LFNwbGl0VGV4dDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0vW1xcc1xcXFxcXC8sOy5cXC1cIic8PlxcW1xcXSgpKl0vZ2ksZD0wO2Q8YS5sZW5ndGg7KXt2YXIgZT1jLmV4ZWMoYSksZT1udWxsIT09ZT9lLmluZGV4OmEubGVuZ3RoO2Q8ZSYmYihkLFxuZSk7ZD1lKzF9fSxGb3JtYXRTdWdnZXN0aW9uVmFsdWU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5FWFQuUHJvY2Vzc2VkUXVlcnlGb3JIaWdobGlnaHQuY2FsbCh0aGlzLHRoaXMuVXNlclZhbHVlKSxjPVtdO3RoaXMuU3BsaXRUZXh0KGIsZnVuY3Rpb24oYSxkKXtjLnB1c2goe3dvcmQ6Yi5zdWJzdHJpbmcoYSxkKS50b0xvd2VyQ2FzZSgpLHByZWZpeDpkPT1iLmxlbmd0aH0pfSk7dmFyIGQ9XCJcIixmPTA7dGhpcy5TcGxpdFRleHQoYSxmdW5jdGlvbihiLGcpe2QrPWEuc3Vic3RyaW5nKGYsYik7dmFyIG49YS5zdWJzdHJpbmcoYixnKS50b0xvd2VyQ2FzZSgpLGg9ZS5GaW5kKGMsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS53b3JkPT1ufHxhLnByZWZpeCYmYS53b3JkPT1uLnN1YnN0cmluZygwLGEud29yZC5sZW5ndGgpfSk7aD8oZCs9XCI8c3Ryb25nPlwiK2Euc3Vic3RyaW5nKGIsYitoLndvcmQubGVuZ3RoKStcIjwvc3Ryb25nPlwiLGQrPWEuc3Vic3RyaW5nKGIraC53b3JkLmxlbmd0aCxnKSk6XG5kKz1hLnN1YnN0cmluZyhiLGcpO2Y9Z30pO2QrPWEuc3Vic3RyaW5nKGYpO2QucmVwbGFjZSgvJi9nLFwiJmFtcDtcIikucmVwbGFjZSgvPC9nLFwiJmx0O1wiKS5yZXBsYWNlKC8+L2csXCImZ3Q7XCIpLnJlcGxhY2UoL1wiL2csXCImcXVvdDtcIikucmVwbGFjZSgvJmx0OyhcXC8/c3Ryb25nKSZndDsvZyxcIjwkMT5cIik7cmV0dXJuIGR9LFNob3dTdWdnZXN0aW9uczpmdW5jdGlvbigpe3ZhciBhPSEwO3RoaXMuVXBkYXRlUG9zaXRpb24oKTt0aGlzLmpTdWdnZXN0aW9ucy5lbXB0eSgpO3RoaXMuU3VnZ2VzdGlvbnN8fCh0aGlzLlN1Z2dlc3Rpb25zPVtdKTtpZigwPHRoaXMuU3VnZ2VzdGlvbnMubGVuZ3RoKWZvcih2YXIgYj0wO2I8dGhpcy5TdWdnZXN0aW9ucy5sZW5ndGg7YisrKXt2YXIgYz10aGlzLkVYVC5TdWdnZXN0aW9uVmlld0luTGlzdCh0aGlzLlN1Z2dlc3Rpb25zW2JdKTtcInN0cmluZ1wiPT10eXBlb2YgYyYmKGM9e0xpbmVzOltjXSxTcGVjaWFsOiExfSk7dmFyIGQ9JChcIjxkaXY+XCIpOyQoXCI8ZGl2PlwiK1xudGhpcy5Gb3JtYXRTdWdnZXN0aW9uVmFsdWUoYy5MaW5lc1swXSkrXCI8L2Rpdj5cIikuYXBwZW5kVG8oZCkuYWRkQ2xhc3ModGhpcy5TdWdnZXN0aW9uTWFpblZhbHVlQ2xhc3MpO2Zvcih2YXIgZT0xO2U8Yy5MaW5lcy5sZW5ndGg7ZSsrKSQoXCI8ZGl2PlwiK3RoaXMuRm9ybWF0U3VnZ2VzdGlvblZhbHVlKGMuTGluZXNbZV0pK1wiPC9kaXY+XCIpLmFwcGVuZFRvKGQpLmFkZENsYXNzKHRoaXMuU3VnZ2VzdGlvblN1YlZhbHVlQ2xhc3MpO2QuYWRkQ2xhc3ModGhpcy5TdWdnZXN0aW9uQ2xhc3MpO2MuU3BlY2lhbCYmZC5hZGRDbGFzcyh0aGlzLlN1Z2dlc3Rpb25TcGVjaWFsQ2xhc3MpO2QuYXBwZW5kVG8odGhpcy5qU3VnZ2VzdGlvbnMpfWVsc2UgZz8kKFwiPGRpdj5cIitnK1wiPC9kaXY+XCIpLmFwcGVuZFRvKHRoaXMualN1Z2dlc3Rpb25zKS5hZGRDbGFzcyh0aGlzLkVtcHR5U3VnZ2VzdGlvbkNsYXNzKTphPSExO2E/KHRoaXMualN1Z2dlc3Rpb25zLnNob3coKSx0aGlzLklzSGlkZGVuPSExLFxudGhpcy5IaWdobGl0ZVN1Z2dlc3Rpb24odGhpcy5TZWxlY3RlZEluZGV4KSk6dGhpcy5DbGVhclN1Z2dlc3Rpb25zKCl9LEhpZGVTdWdnZXN0aW9uczpmdW5jdGlvbigpe3RoaXMualN1Z2dlc3Rpb25zLmhpZGUoKTt0aGlzLklzSGlkZGVuPSEwfSxDbGVhclN1Z2dlc3Rpb25zOmZ1bmN0aW9uKCl7dGhpcy5TdWdnZXN0aW9ucz1bXTt0aGlzLlNlbGVjdGVkSW5kZXg9LTE7dGhpcy5qU3VnZ2VzdGlvbnMuZW1wdHkoKTt0aGlzLkhpZGVTdWdnZXN0aW9ucygpfSxVcGRhdGVQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuakZpZWxkLnBvc2l0aW9uKCksYj10aGlzLmpGaWVsZC5vZmZzZXRQYXJlbnQoKS5vZmZzZXQoKSxjPXRoaXMuakFwcGVuZFRvLm9mZnNldCgpLGQ9YS5sZWZ0KyhiLmxlZnQtYy5sZWZ0KSxhPWEudG9wKyhiLnRvcC1jLnRvcCk7dGhpcy5qU3VnZ2VzdGlvbnMuZGV0YWNoKCk7dGhpcy5qU3VnZ2VzdGlvbnMuYXBwZW5kVG8odGhpcy5qQXBwZW5kVG8pO3RoaXMualN1Z2dlc3Rpb25zLmNzcyhcInBvc2l0aW9uXCIsXG5cImFic29sdXRlXCIpO3RoaXMualN1Z2dlc3Rpb25zLmNzcyhcImxlZnRcIixkKTt0aGlzLmpTdWdnZXN0aW9ucy5jc3MoXCJ0b3BcIixhK3RoaXMuakZpZWxkLm91dGVySGVpZ2h0KCkpO3RoaXMualN1Z2dlc3Rpb25zLmNzcyhcIndpZHRoXCIsdGhpcy5qRmllbGQub3V0ZXJXaWR0aCgpKX0sTmF2aWdhdGVTdWdnZXN0aW9uczpmdW5jdGlvbihhKXt2YXIgYj0hMTthLndoaWNoPT1mLktleXMuRVNDPyhiPSEwLHRoaXMuUmVzZXRGaWVsZCh0aGlzLlVzZXJWYWx1ZSksdGhpcy5IaWRlU3VnZ2VzdGlvbnMoKSk6YS53aGljaD09Zi5LZXlzLkRPV04mJjA8dGhpcy5TdWdnZXN0aW9ucy5sZW5ndGg/KGI9ITAsdGhpcy5Jc0hpZGRlbj8odGhpcy5TaG93U3VnZ2VzdGlvbnMoKSx0aGlzLlNlbGVjdFN1Z2dlc3Rpb24odGhpcy5TZWxlY3RlZEluZGV4KSk6dGhpcy5TZWxlY3RTdWdnZXN0aW9uKHRoaXMuU2VsZWN0ZWRJbmRleCsxKSk6YS53aGljaD09Zi5LZXlzLlVQJiYwPHRoaXMuU3VnZ2VzdGlvbnMubGVuZ3RoP1xuKGI9ITAsdGhpcy5Jc0hpZGRlbj8odGhpcy5TaG93U3VnZ2VzdGlvbnMoKSx0aGlzLlNlbGVjdFN1Z2dlc3Rpb24odGhpcy5TZWxlY3RlZEluZGV4KSk6dGhpcy5TZWxlY3RTdWdnZXN0aW9uKHRoaXMuU2VsZWN0ZWRJbmRleC0xKSk6YS53aGljaD09Zi5LZXlzLkVOVEVSJiYhdGhpcy5Jc0hpZGRlbiYmMDw9dGhpcy5TZWxlY3RlZEluZGV4PyhiPSEwLHRoaXMuU2VsZWN0U3VnZ2VzdGlvbih0aGlzLlNlbGVjdGVkSW5kZXgpLHRoaXMuUmVzZXRGaWVsZCh0aGlzLlNob3duVmFsdWUpLHRoaXMuRVhULk9uQ2hvb3NlU3VnZ2VzdGlvbi5jYWxsKHRoaXMsdGhpcy5TdWdnZXN0aW9uc1t0aGlzLlNlbGVjdGVkSW5kZXhdKSx0aGlzLkNsZWFyU3VnZ2VzdGlvbnMoKSk6YS53aGljaCE9Zi5LZXlzLlRBQnx8dGhpcy5Jc0hpZGRlbnx8KDA8PXRoaXMuU2VsZWN0ZWRJbmRleD8odGhpcy5TZWxlY3RTdWdnZXN0aW9uKHRoaXMuU2VsZWN0ZWRJbmRleCksdGhpcy5SZXNldEZpZWxkKHRoaXMuU2hvd25WYWx1ZSksXG50aGlzLkVYVC5PbkNob29zZVN1Z2dlc3Rpb24uY2FsbCh0aGlzLHRoaXMuU3VnZ2VzdGlvbnNbdGhpcy5TZWxlY3RlZEluZGV4XSkpOnRoaXMuUmVzZXRGaWVsZCh0aGlzLlVzZXJWYWx1ZSksdGhpcy5DbGVhclN1Z2dlc3Rpb25zKCkpO3JldHVybiFifSxTZWxlY3RTdWdnZXN0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuU2VsZWN0ZWRJbmRleD0tMT5hP3RoaXMuU3VnZ2VzdGlvbnMubGVuZ3RoLTE6YT49dGhpcy5TdWdnZXN0aW9ucy5sZW5ndGg/LTE6YTstMSE9dGhpcy5TZWxlY3RlZEluZGV4Pyh0aGlzLlNob3duVmFsdWU9dGhpcy5FWFQuU3VnZ2VzdGlvblZpZXdJbkZpZWxkKHRoaXMuU3VnZ2VzdGlvbnNbdGhpcy5TZWxlY3RlZEluZGV4XSksdGhpcy5qRmllbGQudmFsKHRoaXMuU2hvd25WYWx1ZSkpOnRoaXMuUmVzZXRGaWVsZCh0aGlzLlVzZXJWYWx1ZSk7dGhpcy5IaWdobGl0ZVN1Z2dlc3Rpb24odGhpcy5TZWxlY3RlZEluZGV4KX0sUmVzZXRGaWVsZDpmdW5jdGlvbihhKXt0aGlzLlNob3duVmFsdWU9XG50aGlzLlVzZXJWYWx1ZT1hO3RoaXMuakZpZWxkLnZhbChhKX0sSGlnaGxpdGVTdWdnZXN0aW9uOmZ1bmN0aW9uKGEpe3RoaXMualN1Z2dlc3Rpb25zLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3ModGhpcy5TZWxlY3RlZFN1Z2dlc3Rpb25DbGFzcyk7LTEhPWEmJmE8dGhpcy5TdWdnZXN0aW9ucy5sZW5ndGgmJihhPXRoaXMualN1Z2dlc3Rpb25zLmNoaWxkcmVuKCkuZ2V0KGEpLCQoYSkuYWRkQ2xhc3ModGhpcy5TZWxlY3RlZFN1Z2dlc3Rpb25DbGFzcykpfSxVcGRhdGVTdWdnZXN0aW9uczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmpGaWVsZC52YWwoKSxkPSExO3RoaXMuU2hvd25WYWx1ZSE9YiYmKGQ9ITAsdGhpcy5FWFQuT25FZGl0RmllbGQodGhpcy5TaG93blZhbHVlLGIpKTtpZihkfHxhKXt2YXIgZT10aGlzO2UuUmVzZXRGaWVsZChiKTtlLlNlbGVjdGVkSW5kZXg9LTE7YT10aGlzLkVYVC5QcmVwYXJlUXVlcnkuY2FsbCh0aGlzLGIpO3RoaXMuRVhULklzQWxsb3dlZFF1ZXJ5LmNhbGwodGhpcyxcbmEsYik/KGI9JC5leHRlbmQoe2FodW5nZXN0OmYuVmVyc2lvbn0sYSxtKSxiLm91dHB1dD1iLm91dHB1dD9iLm91dHB1dCtcInxqc29uXCI6XCJqc29uXCIsJC5hamF4KHt0eXBlOlwiR0VUXCIsdXJsOmMsZGF0YTpiLGNhY2hlOiExLGNvbnRleHQ6dGhpcyxzdWNjZXNzOmZ1bmN0aW9uKGEpe2UuU3VnZ2VzdGlvbnM9YS5zdWdnZXN0aW9ucztlLlNob3dTdWdnZXN0aW9ucygpfX0pKTplLkNsZWFyU3VnZ2VzdGlvbnMoKX19LFNldEZvY3VzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuRVhULklzQWxsb3dlZFRvU3VnZ2VzdE9uRm9jdXM7YSYmKHRoaXMuRVhULklzQWxsb3dlZFRvU3VnZ2VzdE9uRm9jdXM9ZnVuY3Rpb24oKXtyZXR1cm4hMX0pO3RoaXMuakZpZWxkLmZvY3VzKCk7YSYmKHRoaXMuRVhULklzQWxsb3dlZFRvU3VnZ2VzdE9uRm9jdXM9Yil9LEluaXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuUmVzZXRGaWVsZCh0aGlzLmpGaWVsZC52YWwoKSk7dGhpcy5qU3VnZ2VzdGlvbnMuYWRkQ2xhc3ModGhpcy5TdWdnZXN0aW9uc0NsYXNzKTtcbnRoaXMualN1Z2dlc3Rpb25zLmNzcyhcIm1heC1oZWlnaHRcIixkKTt0aGlzLmpTdWdnZXN0aW9ucy5jc3MoXCJ6LWluZGV4XCIsYik7dGhpcy5qU3VnZ2VzdGlvbnMuaGlkZSgpO3RoaXMuVXBkYXRlUG9zaXRpb24oKTt0aGlzLmpGaWVsZC5hdHRyKFwiYXV0b2NvbXBsZXRlXCIsXCJvZmZcIik7dGhpcy5qU3VnZ2VzdGlvbnMub24oXCJtb3VzZW92ZXJcIitmLkV2ZW50c05hbWVzcGFjZSxcIi5cIit0aGlzLlN1Z2dlc3Rpb25DbGFzcyxmdW5jdGlvbigpe2EuU2VsZWN0ZWRJbmRleD0kKHRoaXMpLmluZGV4KCk7YS5IaWdobGl0ZVN1Z2dlc3Rpb24oYS5TZWxlY3RlZEluZGV4KX0pO3RoaXMualN1Z2dlc3Rpb25zLm9uKFwibW91c2VvdXRcIitmLkV2ZW50c05hbWVzcGFjZSxmdW5jdGlvbigpe2EuU2VsZWN0ZWRJbmRleD0tMTthLkhpZ2hsaXRlU3VnZ2VzdGlvbihhLlNlbGVjdGVkSW5kZXgpfSk7dGhpcy5qU3VnZ2VzdGlvbnMub24oXCJtb3VzZWRvd25cIitmLkV2ZW50c05hbWVzcGFjZSxcIi5cIit0aGlzLlN1Z2dlc3Rpb25DbGFzcyxcbmZ1bmN0aW9uKGIpe2lmKDE9PWIud2hpY2gpcmV0dXJuIGEuU2VsZWN0ZWRJbmRleD0kKHRoaXMpLmluZGV4KCksYS5TZWxlY3RTdWdnZXN0aW9uKGEuU2VsZWN0ZWRJbmRleCksYS5SZXNldEZpZWxkKGEuU2hvd25WYWx1ZSksYS5FWFQuT25DaG9vc2VTdWdnZXN0aW9uLmNhbGwoYSxhLlN1Z2dlc3Rpb25zW2EuU2VsZWN0ZWRJbmRleF0pLGEuQ2xlYXJTdWdnZXN0aW9ucygpLGEuU2V0Rm9jdXMoITApLCExfSk7dGhpcy5qRmllbGQub24oXCJrZXlkb3duXCIrZi5FdmVudHNOYW1lc3BhY2UsZnVuY3Rpb24oYil7cmV0dXJuIGEuTmF2aWdhdGVTdWdnZXN0aW9ucyhiKX0pO3RoaXMuakZpZWxkLm9uKFwia2V5dXBcIitmLkV2ZW50c05hbWVzcGFjZSxmdW5jdGlvbigpe2EuVXBkYXRlU3VnZ2VzdGlvbnMoKX0pO3RoaXMuakZpZWxkLm9uKFwiaW5wdXRcIitmLkV2ZW50c05hbWVzcGFjZSxmdW5jdGlvbigpe2EuVXBkYXRlU3VnZ2VzdGlvbnMoKX0pO3RoaXMuakZpZWxkLm9uKFwiY2hhbmdlXCIrZi5FdmVudHNOYW1lc3BhY2UsXG5mdW5jdGlvbigpe2EuVXBkYXRlU3VnZ2VzdGlvbnMoKX0pO3RoaXMuakZpZWxkLm9uKFwiYmx1clwiK2YuRXZlbnRzTmFtZXNwYWNlLGZ1bmN0aW9uKCl7YS5Jc0hpZGRlbnx8KGEuUmVzZXRGaWVsZChhLlVzZXJWYWx1ZSksYS5DbGVhclN1Z2dlc3Rpb25zKCkpfSk7dGhpcy5qRmllbGQub24oXCJmb2N1c1wiK2YuRXZlbnRzTmFtZXNwYWNlLGZ1bmN0aW9uKCl7YS5FWFQuSXNBbGxvd2VkVG9TdWdnZXN0T25Gb2N1cy5jYWxsKGEpJiZhLlVwZGF0ZVN1Z2dlc3Rpb25zKCEwKX0pOyQod2luZG93KS5vbihcInJlc2l6ZVwiK2YuRXZlbnRzTmFtZXNwYWNlLGZ1bmN0aW9uKCl7YS5VcGRhdGVQb3NpdGlvbigpfSl9LERpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmpTdWdnZXN0aW9ucy5vZmYoZi5FdmVudHNOYW1lc3BhY2UpO3RoaXMuakZpZWxkLm9mZihmLkV2ZW50c05hbWVzcGFjZSk7JCh3aW5kb3cpLm9mZihmLkV2ZW50c05hbWVzcGFjZSk7dGhpcy5qU3VnZ2VzdGlvbnMucmVtb3ZlKCl9fTthLkluaXQoKTtcbnJldHVybiBhfXdpbmRvdy5BaHVudGVyU3VnZ2VzdD17QWRkcmVzczp7RGlzY3JldGU6ZnVuY3Rpb24oYSl7dmFyIGQ9e29iajpudWxsLGRlZmZlcmVkOiExfTskKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2Qub2JqPWwoYSl9KTt0aGlzLlJ1bm5pbmcucHVzaChkKTtyZXR1cm4gZH0sU29saWQ6ZnVuY3Rpb24oYSl7dmFyIGQ9e29iajpudWxsLGRlZmZlcmVkOiExfTskKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2Qub2JqPXAoYSl9KTt0aGlzLlJ1bm5pbmcucHVzaChkKTtyZXR1cm4gZH0sUnVubmluZzpbXX0sUGVyc29uOntEaXNjcmV0ZTpmdW5jdGlvbihhKXt2YXIgZD17b2JqOm51bGwsZGVmZmVyZWQ6ITF9OyQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7ZC5vYmo9cShhKX0pO3RoaXMuUnVubmluZy5wdXNoKGQpO3JldHVybiBkfSxTb2xpZDpmdW5jdGlvbihhKXt2YXIgZD17b2JqOm51bGwsZGVmZmVyZWQ6ITF9OyQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7ZC5vYmo9XG50KGEpfSk7dGhpcy5SdW5uaW5nLnB1c2goZCk7cmV0dXJuIGR9LFJ1bm5pbmc6W119LENvbXBhbnk6e0Rpc2NyZXRlOmZ1bmN0aW9uKGEpe3ZhciBkPXtvYmo6bnVsbCxkZWZmZXJlZDohMX07JChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtkLm9iaj13KGEpfSk7dGhpcy5SdW5uaW5nLnB1c2goZCk7cmV0dXJuIGR9LFNvbGlkOmZ1bmN0aW9uKGEpe3ZhciBkPXtvYmo6bnVsbCxkZWZmZXJlZDohMX07JChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtkLm9iaj11KGEpfSk7dGhpcy5SdW5uaW5nLnB1c2goZCk7cmV0dXJuIGR9LFJ1bm5pbmc6W119LEJhbms6e1NvbGlkOmZ1bmN0aW9uKGEpe3ZhciBkPXtvYmo6bnVsbCxkZWZmZXJlZDohMX07JChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtkLm9iaj12KGEpfSk7dGhpcy5SdW5uaW5nLnB1c2goZCk7cmV0dXJuIGR9LFJ1bm5pbmc6W119LERpc3Bvc2U6ZnVuY3Rpb24oYSl7dGhpcy5GaW5kQW5kRGlzcG9zZShhLHRoaXMuQWRkcmVzcy5SdW5uaW5nKTtcbnRoaXMuRmluZEFuZERpc3Bvc2UoYSx0aGlzLlBlcnNvbi5SdW5uaW5nKTt0aGlzLkZpbmRBbmREaXNwb3NlKGEsdGhpcy5Db21wYW55LlJ1bm5pbmcpO3RoaXMuRmluZEFuZERpc3Bvc2UoYSx0aGlzLkJhbmsuUnVubmluZyk7dGhpcy5EaXNwb3NlRGVmZmVyZWQodGhpcy5BZGRyZXNzLlJ1bm5pbmcpO3RoaXMuRGlzcG9zZURlZmZlcmVkKHRoaXMuUGVyc29uLlJ1bm5pbmcpO3RoaXMuRGlzcG9zZURlZmZlcmVkKHRoaXMuQ29tcGFueS5SdW5uaW5nKTt0aGlzLkRpc3Bvc2VEZWZmZXJlZCh0aGlzLkJhbmsuUnVubmluZyl9LEZpbmRBbmREaXNwb3NlOmZ1bmN0aW9uKGEsZCl7dmFyIGI9ZS5GaW5kSW5kZXgoZCxmdW5jdGlvbihiKXtyZXR1cm4gYT09Yn0pOy0xIT1iJiYoZFtiXS5vYmo/KGRbYl0ub2JqLkRpc3Bvc2UoKSxkLnNwbGljZShiLDEpKTpkW2JdLmRlZmZlcmVkPSEwKX0sRGlzcG9zZURlZmZlcmVkOmZ1bmN0aW9uKGEpe2Zvcih2YXIgZD1hLmxlbmd0aC0xOzA8PWQ7ZC0tKWFbZF0uZGVmZmVyZWQmJlxuYVtkXS5vYmomJihhW2RdLm9iai5EaXNwb3NlKCksYS5zcGxpY2UoZCwxKSl9fTt2YXIgZj17VmVyc2lvbjpcIjMuNFwiLEV2ZW50c05hbWVzcGFjZTpcIi5haHVuZ2VzdFwiLEFkZHJlc3NMZXZlbHM6e1JlZ2lvbjp7bmFtZTpcIlJlZ2lvblwiLHNpZ246XCJyXCIsbnVtOjB9LERpc3RyaWN0OntuYW1lOlwiRGlzdHJpY3RcIixzaWduOlwiZFwiLG51bToxfSxDaXR5OntuYW1lOlwiQ2l0eVwiLHNpZ246XCJjXCIsbnVtOjJ9LFBsYWNlOntuYW1lOlwiUGxhY2VcIixzaWduOlwicFwiLG51bTozfSxTaXRlOntuYW1lOlwiU2l0ZVwiLHNpZ246XCJ0XCIsbnVtOjR9LFN0cmVldDp7bmFtZTpcIlN0cmVldFwiLHNpZ246XCJzXCIsbnVtOjV9LEhvdXNlOntuYW1lOlwiSG91c2VcIixzaWduOlwiaFwiLG51bTo2fSxCdWlsZGluZzp7bmFtZTpcIkJ1aWxkaW5nXCIsc2lnbjpcImJcIixudW06N30sU3RydWN0dXJlOntuYW1lOlwiU3RydWN0dXJlXCIsc2lnbjpcInVcIixudW06OH0sRmxhdDp7bmFtZTpcIkZsYXRcIixzaWduOlwiZlwiLG51bTo5fX0sWmlwTGV2ZWw6e25hbWU6XCJaaXBcIixcbnNpZ246XCJ6XCJ9LENvbXBhbnlGaWVsZHM6e05hbWU6e25hbWU6XCJOYW1lXCIsc2lnbjpcIm5cIixudW06MH0sQWRkcmVzczp7bmFtZTpcIkFkZHJlc3NcIixzaWduOlwiYVwiLG51bToxfSxQZXJzb246e25hbWU6XCJQZXJzb25cIixzaWduOlwicFwiLG51bToyfX0sS2V5czp7RVNDOjI3LFRBQjo5LEVOVEVSOjEzLFVQOjM4LERPV046NDB9LERlZmF1bHRPcHRpb25zOnthaHVudGVyX3VybDpcImh0dHBzOi8vYWh1bnRlci5ydS9cIixlbXB0eV9tc2c6XCLQndC10YIg0L/QvtC00YXQvtC00Y/RidC10Lkg0L/QvtC00YHQutCw0LfQutC4XCIsbGltaXQ6MTAsc3VnZ2VzdF9vbl9lbXB0eTohMSxzdWdnZXN0X29uX2ZvY3VzOiEwLG9ic29sZXRlX25hbWVzOiExLG9ic29sZXRlX29iamVjdHM6ITEsel9pbmRleDo5OTk5LG1heF9oZWlnaHQ6NTAwLGFwcGVuZF90bzpudWxsLGlkOnZvaWQgMCxvbl9lZGl0OnZvaWQgMCxvbl9lZGl0X2NvbnRleHQ6dm9pZCAwLG9uX2Nob29zZTp2b2lkIDAsb25fY2hvb3NlX2NvbnRleHQ6dm9pZCAwLG9uX2ZldGNoOnZvaWQgMCxcbm9uX2ZldGNoX2NvbnRleHQ6dm9pZCAwLHVzZXI6dm9pZCAwLGFwaV9vcHRpb25zOnZvaWQgMCxmaWx0ZXI6dm9pZCAwLGNvbXBhbnlfYWRkcmVzc19pZDp2b2lkIDAsY29tcGFueV9wZXJzb25faWQ6dm9pZCAwLGVncnVsX2VuYWJsZTohMCxlZ3JpcF9lbmFibGU6ITAsaG91c2Vfc2VhcmNoOiEwLHN0ZWFkX3NlYXJjaDohMCxjb3VudHJ5OlwiXCJ9fSxlPXtHZXRGaWVsZDpmdW5jdGlvbihhKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYSYmXCIjXCIhPT1hWzBdJiZcIi5cIiE9PWFbMF0/JChcIiNcIithKTokKGEpfSxGaW5kSW5kZXg6ZnVuY3Rpb24oYSxkKXtmb3IodmFyIGI9LTEsYz0wO2M8YS5sZW5ndGg7YysrKWlmKGQoYVtjXSkpe2I9YzticmVha31yZXR1cm4gYn0sRmluZDpmdW5jdGlvbihhLGQpe3ZhciBiPW51bGwsYz10aGlzLkZpbmRJbmRleChhLGQpOy0xIT1jJiYoYj1hW2NdKTtyZXR1cm4gYn0sSXNMZXNzTGV2ZWw6ZnVuY3Rpb24oYSxkKXtyZXR1cm4gZi5BZGRyZXNzTGV2ZWxzW2FdLm51bTxcbmYuQWRkcmVzc0xldmVsc1tkXS5udW19LElzTGVzc09yRXF1YWxMZXZlbDpmdW5jdGlvbihhLGQpe3JldHVybiBmLkFkZHJlc3NMZXZlbHNbYV0ubnVtPD1mLkFkZHJlc3NMZXZlbHNbZF0ubnVtfSxJc051bWVyaWNMZXZlbDpmdW5jdGlvbihhKXtyZXR1cm4gZi5BZGRyZXNzTGV2ZWxzW2FdLm51bT49Zi5BZGRyZXNzTGV2ZWxzLkhvdXNlLm51bX0sSXNBZGRyZXNzTGV2ZWw6ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW4gZi5BZGRyZXNzTGV2ZWxzfSxGaW5kQWRkcmVzc0xldmVsQnlTaWduOmZ1bmN0aW9uKGEpe3ZhciBkPVwiXCI7Zm9yKExldmVsIGluIGYuQWRkcmVzc0xldmVscylpZihmLkFkZHJlc3NMZXZlbHNbTGV2ZWxdLnNpZ249PWEpe2Q9Zi5BZGRyZXNzTGV2ZWxzW0xldmVsXS5uYW1lO2JyZWFrfXJldHVybiBkfSxHZXRMZXZlbHNTaWduczpmdW5jdGlvbihhKXtmb3IodmFyIGQ9XCJcIixiPTA7YjxhLmxlbmd0aDtiKyspZCs9Zi5BZGRyZXNzTGV2ZWxzW2FbYl1dLnNpZ247cmV0dXJuIGR9LFxuRXNjYXBlUXVlcnk6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvKFtcXFxcXFxbXFxdXSkvZyxcIlxcXFwkMVwiKX0sRGVjb2RlTWFjaGluZUFkZHJlc3M6ZnVuY3Rpb24oYSl7Zm9yKHZhciBkPVtdLGI9MCxjPVwiXCIsZz17bmFtZTpcIlwiLHR5cGU6XCJcIixsZXZlbDpmLkFkZHJlc3NMZXZlbHMuUmVnaW9uLm5hbWV9O2I8YS5sZW5ndGg7KXtpZihcIlxcXFxcIiE9YVtiXSYmXCI6XCIhPWFbYl0pe3ZhciBoPWUuRmluZEFkZHJlc3NMZXZlbEJ5U2lnbihhW2JdKTtcIlwiPT09aD9jKz1hW2JdOihnLm5hbWU9YyxkLnB1c2goZyksYz1cIlwiLGc9e25hbWU6XCJcIix0eXBlOlwiXCIsbGV2ZWw6aH0sZy5sZXZlbD1oKX1lbHNlXCJcXFxcXCI9PWFbYl0/KGIrKyxiPGEubGVuZ3RoJiYoYys9YVtiXSkpOlwiOlwiPT1hW2JdJiYoZy50eXBlPWMsYz1cIlwiKTtiKyt9MDxjLmxlbmd0aCYmKGcubmFtZT1jLGQucHVzaChnKSk7cmV0dXJuIGR9LEFkZHJlc3NGaWVsZHNEZWx0YTpmdW5jdGlvbihhLGQpe2Zvcih2YXIgYj1bXSxjPTAsZj0wO2M8XG5hLmxlbmd0aCYmZjxkLmxlbmd0aDspaWYoZS5Jc0xlc3NMZXZlbChhW2NdLmxldmVsLGRbZl0ubGV2ZWwpKWIucHVzaChhW2NdKSxjKys7ZWxzZSBpZihlLklzTGVzc0xldmVsKGRbZl0ubGV2ZWwsYVtjXS5sZXZlbCkpezA8YyYmYy0tO2JyZWFrfWVsc2UgYVtjXS50eXBlPT1kW2ZdLnR5cGUmJmFbY10ubmFtZT09ZFtmXS5uYW1lfHxiLnB1c2goYVtjXSksYysrLGYrKztmb3IoO2M8YS5sZW5ndGg7KWIucHVzaChhW2NdKSxjKys7cmV0dXJuIGJ9LEFkZHJlc3NGaWVsZHNUb1N0cmluZzpmdW5jdGlvbihhLGQpe2Zvcih2YXIgYj0hMSxjPVwiXCIsZj0wO2Y8YS5sZW5ndGg7ZisrKWMubGVuZ3RoJiYoYys9XCIsIFwiKSxjKz1hW2ZdLnR5cGUrXCIgXCIrYVtmXS5uYW1lLGUuSXNOdW1lcmljTGV2ZWwoYVtmXS5sZXZlbCkmJihiPSEwKTtkJiYhYiYmKGMrPVwiLCBcIik7cmV0dXJuIGN9LEFkZHJlc3NTdWdnZXN0aW9uVmlld0luTGlzdDpmdW5jdGlvbihhKXt2YXIgZD1hLnZhbHVlO2lmKGEuZl9tYWNoaW5lfHxcbmEuYV9tYWNoaW5lKXt2YXIgYj1lLkRlY29kZU1hY2hpbmVBZGRyZXNzKGEubWFjaGluZSksYz1udWxsLGY9XCJcIjthLmZfbWFjaGluZSYmKGM9ZS5EZWNvZGVNYWNoaW5lQWRkcmVzcyhhLmZfbWFjaGluZSksZj1lLkFkZHJlc3NGaWVsZHNEZWx0YShjLGIpLGY9ZS5BZGRyZXNzRmllbGRzVG9TdHJpbmcoZikpO3ZhciBoPVwiXCI7YS5hX21hY2hpbmUmJihhPWUuRGVjb2RlTWFjaGluZUFkZHJlc3MoYS5hX21hY2hpbmUpLGI9ZS5BZGRyZXNzRmllbGRzRGVsdGEoYSxjP2M6YiksaD1lLkFkZHJlc3NGaWVsZHNUb1N0cmluZyhiKSk7aWYoZnx8aClkKz1cIiAoXCIsZiYmKGQrPVwiIOKGkiBcIitmKSxoJiYoZCs9XCIg4oeSIFwiK2gpLGQrPVwiIClcIn1yZXR1cm4gZH0sQ29tcGFueVN1Z2dlc3Rpb25WaWV3SW5MaXN0OmZ1bmN0aW9uKGEpe3JldHVybntMaW5lczpbYS5uYW1lLGEuYWRkcmVzcyxhLm9ncm4rXCIsINCY0J3QnTogXCIrYS5pbm4rKDA8YS5wZXJzb24ubGVuZ3RoP1wiLCBcIithLnBlcnNvbjpcIlwiKV0sU3BlY2lhbDowPT1cbmEuc3RhdGU/ITE6ITB9fSxCYW5rU3VnZ2VzdGlvblZpZXdJbkxpc3Q6ZnVuY3Rpb24oYSl7cmV0dXJue0xpbmVzOlthLm5hbWUsYS5hZGRyZXNzLFwi0JHQmNCaOiBcIithLmJpYysoMDxhLm9ncm4ubGVuZ3RoP1wiLCDQntCT0KDQnTogXCIrYS5vZ3JuOlwiXCIpXSxTcGVjaWFsOjA9PWEuc3RhdGU/ITE6ITB9fSxFeHRlbmRTdWdnZXN0ZXI6ZnVuY3Rpb24oYSxkKXt2YXIgYj1hLkVYVDskLmV4dGVuZChhLGQpO2EuRVhUPSQuZXh0ZW5kKGIsZC5FWFQpO3JldHVybiBhfSxTZWxlY3REZWZpbmVkOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGQ9MDtkPGFyZ3VtZW50cy5sZW5ndGg7ZCsrKWlmKHZvaWQgMCE9PWFyZ3VtZW50c1tkXSl7YT1hcmd1bWVudHNbZF07YnJlYWt9cmV0dXJuIGF9LEJ1aWxkRmllbGRPcHRpb25zOmZ1bmN0aW9uKGEsZCxiKXt2YXIgYz17fTtmb3IoTmFtZSBpbiBmLkRlZmF1bHRPcHRpb25zKWNbTmFtZV09ZS5TZWxlY3REZWZpbmVkKGFbTmFtZV0sZFtOYW1lXSxmLkRlZmF1bHRPcHRpb25zW05hbWVdKTtcblwiL1wiIT1jLmFodW50ZXJfdXJsW2MuYWh1bnRlcl91cmwubGVuZ3RoLTFdJiYoYy5haHVudGVyX3VybCs9XCIvXCIpO2MuYXBwZW5kX3RvfHwoYy5hcHBlbmRfdG89JChkb2N1bWVudC5ib2R5KSk7Yy5mdWxsX3VybD1jLmFodW50ZXJfdXJsK2I7cmV0dXJuIGN9fX0pKCk7XG4iXSwiZmlsZSI6ImFodW50ZXJfc3VnZ2VzdC5taW4uanMifQ==
